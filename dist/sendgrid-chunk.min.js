(this.webpackChunkCoCreate=this.webpackChunkCoCreate||[]).push([[561],{14828:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>u});var i=n(45398),o=n.n(i);const s={attribute:"data-actions",actions:{},selectedStage:[],stageIndex:0,selectedElement:null,completedEventName:"completedEvent",__init:function(){this.actionButtonEvent()},actionButtonEvent:function(){const e=this;document.addEventListener("click",(function(t){let n=t.target;if(n.getAttribute("data-actions")||(n=t.target.closest("[data-actions]")),!n)return;t.preventDefault();let i=(n.getAttribute(e.attribute)||"").replace(/\s/g,"").split(",");0!=i.length&&(e.stageIndex=0,e.selectedStage=i,e.selectedElement=n,e.__runActionFunc())}))},init:function({action:e,callback:t,endEvent:n}){this.registerEvent(e,t,null,n)},registerEvent:function(e,t,n,i){if(this.actions[e])return;this.actions[e]={key:e,runFunc:t,instance:n||window,endEvent:i};for(let t in this.actions)if(t!=e&&this.actions[t].endEvent===i)return;const o=this;document.addEventListener(i,(function(e){o.__nextAction(i,e.detail)}))},__runActionFunc:function(e){if(this.stageIndex>=this.selectedStage.length)return void(this.stageIndex==this.selectedStage.length&&this.__runAtag(this.selectedElement));const t=this.selectedStage[this.stageIndex],n=this.actions[t];if(n)n.runFunc?n.runFunc.call(null,this.selectedElement,e):this.__nextAction(n.endEvent,{});else{"next"===this.__runSpecialAction(t,e)&&this.__moveNextAction()}},__nextAction:function(e,t){const n=this.selectedStage[this.stageIndex];n&&e===this.actions[n].endEvent&&this.__moveNextAction(t)},__runAtag:function(e){e.querySelector("a")},__runSpecialAction:function(e,t){let n=/(\w+)\{([a-zA-Z0-9_ \-#$.]+)\}/gm.exec(e);if(!n||n.length<3)return"next";let i=n[1],o=n[2].trim();if(!o)return"next";const s=this;switch(i){case"event":document.addEventListener(o,(e=>{s.__moveNextAction(e)}),{once:!0});break;case"timeout":parseInt(o)>0&&setTimeout((function(){s.__moveNextAction(t)}),parseInt(o));break;case"action":let e=document.querySelector(o);e&&e.click();break;default:return"next"}},__moveNextAction:function(e){this.stageIndex++,this.__runActionFunc(e)}};s.__init();const r=s,a={__getValueFromObject:function(e,t){try{if(void 0===e||!t)return!1;let n=e,i=t.split(".");for(let e=0;e<i.length;e++)if(n=n[i[e]],!n)return!1;return n}catch(e){return!1}},__getValue:function(e,t){let n=/{{\s*([\w\W]+)\s*}}/g.exec(t);return!!n&&this.__getValueFromObject(e,n[1].trim())},__createObject:function(e,t){try{if(!t)return e;let i=t.split("."),o=e;for(var n=i.length-1;n>=0;n--)o={[i[n]]:o};return o}catch(e){return!1}},__replaceValue:function(e,t){let n=!1,i=this,o=null,s=t.match(/{{([A-Za-z0-9_.,\- ]*)}}/g);return s&&(s.forEach((o=>{let s=i.__getValue(e,o);s&&"object"!=typeof s&&(n=!0,t=t.replace(o,s))})),n&&(o=t)),o},setArray:function(e,t){const n=e.getAttribute("data-render_array")||"data",i=e.getAttribute("data-render_key")||n,o=this,s=this.__getValueFromObject(t,n);n&&Array.isArray(s)&&s.forEach(((t,s)=>{let r=e.cloneNode(!0);r.classList.remove("template"),r.classList.add("clone_"+n),"object"!=typeof t?t={"--":t}:t.index=s;let a=o.__createObject(t,i);o.setValue([r],a),e.insertAdjacentHTML("beforebegin",r.outerHTML)}))},setValue:function(e,t,n,i){if(!t)return;const o=this;Array.from(e).forEach((e=>{let i=e.getAttribute("data-pass_id");if(!n||i==n){if(Array.from(e.attributes).forEach((n=>{let i=n.name.toLowerCase(),s=n.value;if(s=o.__replaceValue(t,s),s){if("value"==i){switch(e.tagName.toLowerCase()){case"input":e.setAttribute(i,s);break;case"textarea":e.setAttribute(i,s),e.textContent=s;break;default:0===e.children.length&&(e.innerHTML=s)}}e.setAttribute(i,s)}})),0==e.children.length&&e.textContent){let n=e.textContent;n=o.__replaceValue(t,n),n&&(e.textContent=n)}e.children.length>0&&(o.setValue(e.children,t),e.classList.contains("template")&&o.setArray(e,t))}}))},data:function({selector:e,data:t,elements:n,passTo:i}){e?this.render(e,t):n&&this.setValue(n,t,i)},render:function(e,t){let n=document.querySelector(e);n&&(Array.isArray(t)?(n.setAttribute("data-render_array","test"),this.setValue([n],{test:t})):this.setValue(n.children,t))}};let c=new(o())("api");const l={modules:{},init:function({name:e,module:t}){this.register(e,t)},register:function(e,t){const n=this;void 0===this.modules[e]&&(this.modules[e]=t,c.listen(e,(t=>{n.__responseProcess(e,t)})),Array.isArray(t.actions)&&t.actions.forEach((e=>{"function"!=typeof t[`action_${e}`]&&(t[`action_${e}`]=function(i){n.__commonAction(t.id,e,i)}),r.init({action:e,endEvent:e,callback:n=>{t[`action_${e}`](n)}})})))},__responseProcess:function(e,t){const{type:n,response:i}=t,o=this.modules[e];n&&i&&o&&("function"==typeof o[`render_${n}`]&&o[`render_${n}`](i),this.render(n,i),document.dispatchEvent(new CustomEvent(n,{detail:{data:i}})))},__commonAction:function(e,t,n){const i=n.closest("form")||document;let o=l.getFormData(e,t,i);l.send(e,t,o)},getFormData:function(e,t,n){const i=`data-${e}`,o=this,s=n.querySelectorAll(`[${i}^="${t}."]`);let r={};s.forEach((n=>{let s=n.getAttribute(i),a=n.getAttribute(i+"_array"),c=o.__getElValue(n);if(s){if(t){let e=new RegExp(`^${t}.`,"i");if(!e.test(s))return;s=s.replace(e,"")}a?(r[s]||(r[s]=[]),r[s].push(o.getFormData(e,a,n))):null!=c&&(r[s]=c)}}));let a=Object.keys(r),c={};return a.forEach((e=>{if(e.split(".").length>1){let t=o.__createObject(r[e],e);delete r[e],c=o.__mergeObject(c,t)}else c[e]=r[e]})),c},__getElValue:function(e){let t=null;if(void 0!==e.value)switch(e.type.toLocaleLowerCase()){case"checkbox":e.checked&&(t=e.value);break;default:t=e.value}else t=e.getAttribute("value"),t||(t=e.innerHTML);return t},__mergeObject:function(e,t){e=e||{};for(let n of Object.keys(t))t[n]instanceof Object&&Object.assign(t[n],this.__mergeObject(e[n],t[n]));return Object.assign(e||{},t),e},__createObject:function(e,t){if(!t)return e;let n=t.split("."),i=e;for(var o=n.length-1;o>=0;o--)i={[n[o]]:i};return i},send:function(e,t,n){let i=this.getCommonParamsExtend(n||{});i={...i,data:n},c.send(e,{type:t,data:i})},render:function(e,t){a.data({selector:`[data-template_id="${e}"]`,data:t})},createApiSocket:function(e,t){t?(c.create({namespace:t,room:null,host:e}),c.setGlobalScope(t)):c.create({namespace:null,room:null,host:e})},getCommonParamsExtend:function(e){return{apiKey:e.apiKey||config.apiKey,securityKey:e.securityKey||config.securityKey,organization_id:e.organization_id||config.organization_Id}}};l.createApiSocket(window.config.host?window.config.host:"server.cocreate.app",window.config.organization_Id);const u=l},4550:function(e,t,n){var i,o;"undefined"!=typeof self&&self,i=[n(14828)],void 0===(o=function(e){return e}.apply(t,i))||(e.exports=o)},19121:function(e,t){var n;"undefined"!=typeof self&&self,void 0===(n=function(){return function(e){function t(){let t={};return e&&e.config&&(t=e.config),{apiKey:t.apiKey,securityKey:t.securityKey,organization_id:t.organization_Id}}function n(t){let n={};return e&&e.config&&(n=e.config),{apiKey:t.apiKey||n.apiKey,securityKey:t.securityKey||n.securityKey,organization_id:t.organization_id||n.organization_Id}}function i(t,n){let i={};e&&e.config&&(i=e.config);let o=t||i.organization_Id,s=n||"";return s?`${o}/${s}`:o}function o(e=36){let t=(new Date).getTime(),n=0,i="uxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx";if(e<=i.length)i=i.substr(0,e);else{let t=e-i.length,n="-xxxyyxxx",o=Math.floor(t/n.length);for(let e=0;e<o;e++)i+=n;o=t-o*n.length,i+=n.substr(0,o)}return i.replace(/[xy]/g,(function(e){var i=16*Math.random();return t>0?(i=(t+i)%16|0,t=Math.floor(t/16)):(i=(n+i)%16|0,n=Math.floor(n/16)),("x"==e?i:7&i|8).toString(16)}))}return{getCommonParams:t,getCommonParamsExtend:n,generateSocketClient:i,GenerateUUID:o}}(window)}.apply(t,[]))||(e.exports=n)},45398:function(e,t,n){var i,o;"undefined"!=typeof self&&self,i=[n(19121)],void 0===(o=function(e){return function(e,t,n,i){class o{constructor(e="crud"){this.prefix=e||"crud",this.sockets=new Map,this.listeners=new Map,this.messageQueue=new Map,this.saveFileName="",this.globalScope=""}setGlobalScope(e){this.globalScope=`${this.prefix}/${e}`}getGlobalScope(){return this.globalScope}create(e){const{namespace:o,room:s}=e,r=this.getKey(o,s);let a,c=this;if(o&&this.setGlobalScope(o),this.sockets.get(r))return void(a=this.sockets.get(r));let l=t.location.protocol;"about:"===t.location.protocol&&(l=t.parent.location.protocol,e.host||(e.host=t.parent.location.host));let u="http:"===l?"ws":"wss";const d=e.port?e.port:8088;let f=`${u}://${t.location.host}:${d}/${r}`;e.host&&(f=e.host.includes("://")?`${e.host}/${r}`:e.host.includes(":")?`${u}://${e.host}/${r}`:`${u}://${e.host}:${d}/${r}`);try{a=new n(f)}catch(e){return}a.onopen=function(e){(c.messageQueue.get(r)||[]).forEach((e=>a.send(JSON.stringify(e)))),c.sockets.set(r,a),c.messageQueue.set(r,[])},a.onclose=function(t){switch(t.code){case 1e3:break;default:c.destroy(a,r),c.reconnect(a,e)}},a.onerror=function(t){c.destroy(a,r),c.reconnect(a,e)},a.onmessage=function(e){try{if(t.Blob&&e.data instanceof i)return void c.saveFile(e.data);let o=JSON.parse(e.data);if(o.data.event){if(t.CustomEvent){var n=new t.CustomEvent(o.data.event,{detail:o.data});return void t.document.dispatchEvent(n)}return void process.emit(o.data.event,o.data)}o.action;const s=c.listeners.get(o.action);if(!s)return;s.forEach((e=>{e(o.data,r)}))}catch(e){}}}send(t,n,i){const o={action:t,data:{...n,uid:e.GenerateUUID()}},s=this.getKeyByRoom(i),r=this.getByRoom(i);r?r.send(JSON.stringify(o)):this.messageQueue.get(s)?this.messageQueue.get(s).push(o):this.messageQueue.set(s,[o])}sendFile(e,t){const n=this.getByRoom(t);n&&n.send(e)}listen(e,t){this.listeners.get(e)?this.listeners.get(e).push(t):this.listeners.set(e,[t])}reconnect(e,t){let n=this;setTimeout((function(){n.create(t)}),1e3)}destroy(e,t){e&&(e.onerror=e.onopen=e.onclose=null,e.close(),e=null),this.sockets.get(t)&&this.sockets.delete(t)}destroyByKey(e){let t=this.sockets.get(e);t&&this.destroy(t,e)}getKey(e,t){let n=`${this.prefix}`;return e&&""!=e&&(n+=t&&""!=t?`/${e}/${t}`:`/${e}`),n}getByRoom(e){let t=this.getKeyByRoom(e);return this.sockets.get(t)}getKeyByRoom(e){let t=this.globalScope;return e&&(t=`${this.prefix}/${e}`),t}saveFile(e){if(t.document){const i=this.saveFileName||"downloadFile";var n=t.document.createElement("a");t.document.body.appendChild(n),n.style="display: none";let o=window.URL.createObjectURL(e);n.href=o,n.download=i,n.click(),t.URL.revokeObjectURL(o),this.saveFileName=""}}listenAsync(e){return new Promise(((n,i)=>{t.document?t.document.addEventListener(e,(function(e){n(e.detail)}),{once:!0}):process.once(e,(e=>{n(e)}))}))}}return o}(e,window,WebSocket,Blob)}.apply(t,i))||(e.exports=o)},73892:(e,t,n)=>{"use strict";var i;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;const o={id:"sendgrid",actions:["domainList","domainAuthenticate","sendDNSEmail","getSubUsersList","postSubUser","getMarketingContacts","postMarketingContact","getMarketingStats","getMarketingSinglesends","getEmailAddress","EmailValidation","sendEmail","domainValidate"],render_domainList:function(e){},render_domainValidate:function(e){},render_domainAuthenticate:function(e){"error"==e.object&&alert(e.data),e={data:e},CoCreate.api.render("sendgridDomainAuthenticate",e)},render_sendDNSEmail:function(e){},render_getSubUsersList:function(e){},render_getMarketingContacts:function(e){},render_postMarketingContact:function(e){},render_getMarketingStats:function(e){},render_getMarketingSinglesends:function(e){},render_getEmailAddress:function(e){},render_EmailValidation:function(e){},render_sendEmail:function(e){}};((i=n(4550))&&i.__esModule?i:{default:i}).default.init({name:o.id,module:o});var s=CoCreateSendgrid;t.default=s},2532:(e,t,n)=>{"use strict";var i,o;"undefined"!=typeof self&&self,i=[n(73892)],void 0===(o=function(e){return e}.apply(t,i))||(e.exports=o)}}]);