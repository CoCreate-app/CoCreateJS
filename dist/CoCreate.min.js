!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.CoCreate=t():e.CoCreate=t()}(this,(function(){return(()=>{"use strict";var e,t,o,n,r={7388:(e,t,o)=>{o.r(t);var n=o(366);let r=document.createElement("style");r.setAttribute("component","CoCreateCss"),document.head.appendChild(r);var i,a=[];function s(){let e,t=[],o=a.length;for(let e in a)t.push(i.cssRules[o-e-1]),i.deleteRule(o-e-1);for(let n=0;n<o;n++){e=!1;for(let r=o-1;r>n;r--)if(a[r-1]>a[r]){let o=a[r];a[r]=a[r-1],a[r-1]=o,o=t[r],t[r]=t[r-1],t[r-1]=o,e=!0}if(0==e)break}for(let e=0;e<o;e++)i.insertRule(t[e].cssText)}function c(e){let t=/.+:.+/;for(let o of e)try{if(t.exec(o)&&-1==a.indexOf(o))if(/.+@.+/.exec(o)){let e=o.split("@"),t=l(o);const n=["xs","sm","md","lg","xl"],r=[[0,567],[576,768],[769,992],[993,1200],[1201,0]];for(let s=1;s<e.length;s++){let c=n.indexOf(e[s]);if(-1==c)continue;let l=r[c],u="@media screen";0!=l[0]&&(u+=" and (min-width:"+l[0]+"px)"),0!=l[1]&&(u+=" and (max-width:"+l[1]+"px)");let d=u+"{"+t+"}";i.insertRule(d),a.push(o)}}else{let e=l(o);i.insertRule(e),a.push(o)}}catch(e){}}function l(e){let t=e.split(":"),o="",n=t[1].replace(/\./g,"\\.").replace(/%/,"\\%").replace(/@/g,"\\@").replace(/\(/g,"\\(").replace(/\)/g,"\\)").replace(/#/g,"\\#").replace(/,/g,"\\,").replace(/!/,"\\!");if(t[1]=t[1].split("@")[0],t[1]=t[1].replace(/_/g," "),t.length>2){let e=[];for(let o=0;o<t.length-2;o++)n+="\\:"+t[2+o],e.push(":"+t[2+o]);let r="."+t[0]+"\\:"+n;o+=r+e[0];for(let t=1;t<e.length;t++)o+=", "+r+e[t];o+=`{${t[0]}:${t[1]}}`}else o=`.${t[0]}\\:${n}{${t[0]}:${t[1]}}`;return o}window.addEventListener("load",(function(){n.default.init({name:"ccCss",observe:["attributes","childList"],attributes:["class"],callback:e=>{"childList"==e.type&&e.target.querySelectorAll("*").forEach((e=>{c(e.classList)})),c(e.target.classList),s()}}),i=r.sheet;let e=document.querySelectorAll("[class]");for(let t of e)c(t.classList);s()}))},366:(e,t,o)=>{o.r(t),o.d(t,{default:()=>r}),window.profiler={},window.counter=0,window.counter2=0,window.targets={},window.attributeName={},Element.prototype.matches||(Element.prototype.matches=Element.prototype.matchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector||Element.prototype.oMatchesSelector||Element.prototype.webkitMatchesSelector||function(e){for(var t=(this.document||this.ownerDocument).querySelectorAll(e),o=t.length;--o>=0&&t.item(o)!==this;);return o>-1});const n={initTasks:new Map,attrTasks:new Map,rules:new Map,rulesArray:[],__init:function(){const e=this;new MutationObserver(((t,o)=>e.__callback(t,o))).observe(document.body,{attributes:!0,childList:!0,subtree:!0,characterData:!1,attributeOldValue:!0,characterData:!0})},init:function({observe:e,include:t,exclude:o,attributes:n,name:r,callback:i}){e.some((e=>"childList"==e))&&this.initTasks.set(i,{observe:e,include:t,exclude:o,attributes:n,name:r}),e.some((e=>"attributes"==e))&&this.attrTasks.set(i,{observe:e,include:t,exclude:o,attributes:n,name:r})},remove:function(e){this.initTasks.delete(e),this.attrTasks.delete(e)},addRule:function({include:e,exclude:t,name:o}){this.rules.set(o,{include:e,exclude:t}),this.rulesArray=Array.from(this.rules)},removeRule:function({name:e}){this.rules.delete(e),this.rulesArray=Array.from(this.rules)},__callback:function(e,t){window.counter++;for(let t of e)"childList"==t.type&&t.addedNodes.length>0&&this.__initCallback(t),"attributes"==t.type&&this.__attrCallback(t)},__initCallback:function(e){let t=Array.from(e.addedNodes);this.initTasks.forEach((({observe:t,include:o,exclude:n,attributes:r,name:i},a)=>{e.addedNodes.forEach((t=>{t.tagName&&(!o||t.matches(o)||t.querySelector(o))&&(n&&(t.matches(n)||t.querySelector(n))||t.created||(window.counter2++,window.profiler[i]=null!=window.profiler[i]?window.profiler[i]+1:0,window.targets[e.target.id||e.target.tagName]=null!=window.targets[e.target.id||e.target.tagName]?window.targets[e.target.id||e.target.tagName]+1:0,window.attributeName[e.attributeName]=null!=window.attributeName[e.attributeName]?window.attributeName[e.attributeName]+1:0,a.apply(null,[{type:e.type,target:t}])))}))})),t.map((e=>e.created=!0))},__attrCallback:function(e){for(let[t,{include:o,exclude:n}]of this.rulesArray){if(o&&!e.target.matches(o))return;if(n&&e.target.matches(n))return}this.attrTasks.forEach((({observe:t,include:o,exclude:n,attributes:r,name:i},a)=>{r&&e.attributeName&&!r.includes(e.attributeName)||o&&!e.target.matches(o)||n&&e.target.matches(n)||!e.attributeName||e.target.getAttribute(e.attributeName)!=e.oldValue&&(window.counter2++,window.profiler[i]=null!=window.profiler[i]?window.profiler[i]+1:0,window.targets[e.target.id||e.target.tagName]=null!=window.targets[e.target.id||e.target.tagName]?window.targets[e.target.id||e.target.tagName]+1:0,window.attributeName[e.attributeName]=null!=window.attributeName[e.attributeName]?window.attributeName[e.attributeName]+1:0,a.apply(null,[e]))}))},setInitialized:function(e,t){e["co_initialized_"+(t=t||"")]=!0},getInitialized:function(e,t){return!!e["co_initialized_"+(t=t||"")]}};n.__init();const r=n},5401:(e,t,o)=>{o.r(t),o.d(t,{default:()=>n});const n=class{constructor(e="crud"){this.prefix=e||"crud",this.sockets=new Map,this.listeners=new Map,this.messageQueue=new Map,this.saveFileName="",this.globalScope=""}setGlobalScope(e){this.globalScope=`${this.prefix}/${e}`}getGlobalScope(){return this.globalScope}create(e){const{namespace:t,room:o}=e,n=this.getKey(t,o);let r,i=this;if(this.sockets.get(n))return r=this.sockets.get(n),void console.log("SOcket already has been register");let a=window.location.protocol;"about:"===window.location.protocol&&(a=window.parent.location.protocol);let s="http:"===a?"ws":"wss";const c=e.port?e.port:8088;let l=`${s}://${window.location.host}:${c}/${n}`;e.host&&(l=e.host.includes("://")?`${e.host}/${n}`:`${s}://${e.host}:${c}/${n}`),r=new WebSocket(l),r.onopen=function(e){console.log("created socket: "+n);const t=i.messageQueue.get(n)||[];console.log(t),t.forEach((e=>r.send(JSON.stringify(e)))),i.sockets.set(n,r),i.messageQueue.set(n,[])},r.onclose=function(t){switch(t.code){case 1e3:console.log("websocket: closed");break;default:i.destroy(r,n),i.reconnect(r,e)}},r.onerror=function(t){console.log("Socket error"),i.destroy(r,n),i.reconnect(r,e)},r.onmessage=function(e){try{if(e.data instanceof Blob)return void i.saveFile(e.data);let o=JSON.parse(e.data);if(o.data.event){var t=new CustomEvent(o.data.event,{detail:o.data});return void document.dispatchEvent(t)}o.action;const r=i.listeners.get(o.action);if(!r)return;r.forEach((e=>{e(o.data,n)}))}catch(e){console.log(e)}}}send(e,t,o){const n={action:e,data:t},r=this.getKeyByRoom(o),i=this.getByRoom(o);i?i.send(JSON.stringify(n)):this.messageQueue.get(r)?this.messageQueue.get(r).push(n):this.messageQueue.set(r,[n])}sendFile(e,t){const o=this.getByRoom(t);o&&o.send(e)}listen(e,t){this.listeners.get(e)?this.listeners.get(e).push(t):this.listeners.set(e,[t])}reconnect(e,t){let o=this;setTimeout((function(){o.create(t)}),1e3)}destroy(e,t){e&&(e.onerror=e.onopen=e.onclose=null,e.close(),e=null),this.sockets.get(t)&&this.sockets.delete(t)}getKey(e,t){let o=`${this.prefix}`;return e&&""!=e&&(o+=t&&""!=t?`/${e}/${t}`:`/${e}`),o}getByRoom(e){let t=this.getKeyByRoom(e);return this.sockets.get(t)}getKeyByRoom(e){let t=this.globalScope;return e&&(t=`${this.prefix}/${e}`),t}saveFile(e){const t=this.saveFileName||"downloadFile";var o=document.createElement("a");document.body.appendChild(o),o.style="display: none";let n=window.URL.createObjectURL(e);o.href=n,o.download=t,o.click(),window.URL.revokeObjectURL(n),this.saveFileName=""}listenAsync(e){return new Promise((t=>{document.addEventListener(e,(function(e){t(e.detail)}),{once:!0})}))}}},5531:(e,t,o)=>{var n;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;let r=new(((n=o(5401))&&n.__esModule?n:{default:n}).default)("ws");const i={socketInitFuncs:[],moduleSelectors:[],socket:null,host:"server.cocreate.app",setSocket:function(e){this.socket=e},init:function(e,t){e&&(this.host=e),this.__setConfig(),this.createGeneralSocket(e,t||config.organization_Id),this.initSocketListener(),this.createUserSocket(e)},__setConfig:function(){let e=window.localStorage.getItem("organization_id"),t=window.localStorage.getItem("securityKey"),o=window.localStorage.getItem("apiKey");e&&(config.organization_Id=e),o&&(config.apiKey=o),t&&(config.securityKey=t)},initSocketListener:function(){const e=this;this.socket.listen("connect",(function(t,o){o==e.socket.getGlobalScope()&&e.socketInitFuncs.forEach((e=>{e.initFunc.call(e.instance)}))})),this.socket.listen("downloadFileInfo",(function(t){e.socket.saveFileName=t.file_name}))},createUserSocket:function(e){var t=window.localStorage.getItem("user_id");t&&this.socket.create({namespace:"users",room:t,host:e})},createGeneralSocket:function(e,t){t?(this.socket.create({namespace:t,room:null,host:e}),this.socket.setGlobalScope(t)):this.socket.create({namespace:null,room:null,host:e})},registerInit:function(e,t){this.socketInitFuncs.push({initFunc:e,instance:t||window})},createSocket:function(e){this.socket.create(e)},destroySocket:function(e){const{namespace:t,room:o}=e,n=this.socket.getKey(t,o);let r=this.socket.sockets.get(n);r&&this.socket.destroy(r,n)}};i.setSocket(r),i.init(window.config.host?window.config.host:"server.cocreate.app");var a=i;t.default=a}},i={};function a(e){var t=i[e];if(void 0!==t)return t.exports;var o=i[e]={id:e,exports:{}};return r[e](o,o.exports,a),o.exports}a.m=r,a.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return a.d(t,{a:t}),t},t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,a.t=function(o,n){if(1&n&&(o=this(o)),8&n)return o;if("object"==typeof o&&o){if(4&n&&o.__esModule)return o;if(16&n&&"function"==typeof o.then)return o}var r=Object.create(null);a.r(r);var i={};e=e||[null,t({}),t([]),t(t)];for(var s=2&n&&o;"object"==typeof s&&!~e.indexOf(s);s=t(s))Object.getOwnPropertyNames(s).forEach((e=>i[e]=()=>o[e]));return i.default=()=>o,a.d(r,i),r},a.d=(e,t)=>{for(var o in t)a.o(t,o)&&!a.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},a.f={},a.e=e=>Promise.all(Object.keys(a.f).reduce(((t,o)=>(a.f[o](e,t),t)),[])),a.u=e=>(({18:"conditionalLogic-chunk",73:"uuid-chunk",93:"select-chunk",142:"form-chunk",148:"splitview-chunk",172:"color-chunk",220:"message-chunk",225:"filter-chunk",238:"fetch-chunk",246:"vdom-chunk",247:"progress-chunk",272:"logic-chunk",305:"htmltags-chunk",353:"organizations-chunk",380:"api-chunk",454:"sidenav-chunk",478:"floating-label-chunk",520:"modal-chunk",560:"dnd-chunk",574:"calculation-chunk",585:"utils-chunk",634:"crud-chunk",687:"parallax-chunk",690:"fullscreen-chunk",703:"scroll-chunk",732:"attributes-chunk",753:"toolbar-chunk",754:"contenteditable-chunk",769:"action-chunk",813:"render-key-chunk",822:"render-chunk",823:"toggle-chunk",871:"room-chunk",888:"socialShare-chunk",891:"users-chunk",924:"text-chunk",942:"pickr-chunk",957:"crdt-chunk",981:"selected-chunk",985:"components-chunk"}[e]||e)+".min.js"),a.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),o={},n="CoCreate:",a.l=(e,t,r,i)=>{if(o[e])o[e].push(t);else{var s,c;if(void 0!==r)for(var l=document.getElementsByTagName("script"),u=0;u<l.length;u++){var d=l[u];if(d.getAttribute("src")==e||d.getAttribute("data-webpack")==n+r){s=d;break}}s||(c=!0,(s=document.createElement("script")).charset="utf-8",s.timeout=120,a.nc&&s.setAttribute("nonce",a.nc),s.setAttribute("data-webpack",n+r),s.src=e),o[e]=[t];var h=(t,n)=>{s.onerror=s.onload=null,clearTimeout(f);var r=o[e];if(delete o[e],s.parentNode&&s.parentNode.removeChild(s),r&&r.forEach((e=>e(n))),t)return t(n)},f=setTimeout(h.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=h.bind(null,s.onerror),s.onload=h.bind(null,s.onload),c&&document.head.appendChild(s)}},a.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e;a.g.importScripts&&(e=a.g.location+"");var t=a.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var o=t.getElementsByTagName("script");o.length&&(e=o[o.length-1].src)}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),a.p=e})(),(()=>{var e={472:0};a.f.j=(t,o)=>{var n=a.o(e,t)?e[t]:void 0;if(0!==n)if(n)o.push(n[2]);else{var r=new Promise(((o,r)=>n=e[t]=[o,r]));o.push(n[2]=r);var i=a.p+a.u(t),s=new Error;a.l(i,(o=>{if(a.o(e,t)&&(0!==(n=e[t])&&(e[t]=void 0),n)){var r=o&&("load"===o.type?"missing":o.type),i=o&&o.target&&o.target.src;s.message="Loading chunk "+t+" failed.\n("+r+": "+i+")",s.name="ChunkLoadError",s.type=r,s.request=i,n[1](s)}}),"chunk-"+t,t)}};var t=(t,o)=>{var n,r,[i,s,c]=o,l=0;for(n in s)a.o(s,n)&&(a.m[n]=s[n]);for(c&&c(a),t&&t(o);l<i.length;l++)r=i[l],a.o(e,r)&&e[r]&&e[r][0](),e[i[l]]=0},o=this.webpackChunkCoCreate=this.webpackChunkCoCreate||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))})();var s={};return(()=>{var e=s;e.default=void 0;var t=r(a(5531)),o=r(a(7388)),n=r(a(366));function r(e){return e&&e.__esModule?e:{default:e}}!async function(){let e=await a.e(985).then(a.t.bind(a,8413,23));Object.assign(window.CoCreate,{components:e.default})}();var i={css:o.default,observer:n.default,core:t.default,addComponent:function(e,t){this[e]=t},removeComponent:function(e){this[e]}};e.default=i})(),s.default})()}));