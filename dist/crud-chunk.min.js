(this.webpackChunkCoCreate=this.webpackChunkCoCreate||[]).push([[5634],{5375:function(t,e,n){var o,c;"undefined"!=typeof self&&self,o=[n(9446),n(4965)],void 0===(c=function(t,e){return function(t,e,n){return{socket:null,setSocket:function(t){this.socket=t},readDocumentList(t){if(!t)return;let n=e.getCommonParams();t.collection&&t.operator&&(n={...n,...t},this.socket.send("readDocumentList",n))},createDocument:function(n){if(null===n)return;let o=e.getCommonParamsExtend(n),c={...n,...o},r=n.data||{};r.organization_id||(r.organization_id=t.config.organization_Id),n.data&&(r={...r,...n.data}),c.data=r;const i=e.generateSocketClient(n.namespace,n.room);this.socket.send("createDocument",c,i)},updateDocument:function(t){if(!t||!n.checkDocumentId(t.document_id))return;let o=e.getCommonParamsExtend(t),c={...t,...o};if("object"==typeof t.data&&(c.set=t.data),Array.isArray(t.delete_fields)&&(c.unset=t.delete_fields),!c.set&&!c.unset)return;!1===t.broadcast&&(c.broadcast=!1),void 0===t.broadcast_sender&&(c.broadcast_sender=!0);const r=e.generateSocketClient(t.namespace,t.room);this.socket.send("updateDocument",c,r)},readDocument:function(t){if(null===t)return;if(!t||!n.checkDocumentId(t.document_id))return;let o=e.getCommonParamsExtend(t),c={...t,...o};this.socket.send("readDocument",c)},deleteDocument:function(t){if(!t||!n.checkDocumentId(t.document_id))return;let o=e.getCommonParamsExtend(t),c={...t,...o};const r=e.generateSocketClient(t.namespace,t.room);this.socket.send("deleteDocument",c,r)},exportCollection:function(t){if(null===t)return;let n=e.getCommonParamsExtend(t);n.collection=t.collection,n.export_type=t.export_type,n.metadata=t.metadata,this.socket.send("exportDB",n)},importCollection:function(n){const{file:o}=n;if(null===n||!(o instanceof t.File))return;const c=o.name.split(".").pop();if(!["json","csv"].some((t=>t===c)))return;let r=e.getCommonParamsExtend(n);r.collection=n.collection,r.import_type=c,this.socket.send("importDB",r),this.socket.sendFile(o)},listen:function(t,e){this.socket.listen(t,e)},listenAsync:function(t){return this.socket.listenAsync(t)},createSocket:function(t,e){e?(this.socket.create({namespace:e,room:null,host:t}),this.socket.setGlobalScope(e)):this.socket.create({namespace:null,room:null,host:t})},...n}}(window,t,e)}.apply(e,o))||(t.exports=c)},5611:function(t,e,n){var o,c;"undefined"!=typeof self&&self,o=[n(8585),n(5375)],void 0===(c=function(t,e){return function(t,e,n){if(t){let t=new e("ws");n.setSocket(t),n.createSocket(window.config.host?window.config.host:window.location.hostname,window.config.organization_Id)}return n}(!0,t,e)}.apply(e,o))||(t.exports=c)},4965:function(t,e){var n;"undefined"!=typeof self&&self,void 0===(n=function(){return function(){function t(e,n){e=e||{};for(let o of Object.keys(n))n[o]instanceof Object&&Object.assign(n[o],t(e[o],n[o]));return Object.assign(e||{},n),e}function e(t,e){if(!e)return t;let n=e.split("."),o=t;for(var c=n.length-1;c>=0;c--)o={[n[c]]:o};return o}function n(t,e){try{let n=/([\w\W]+)\[(\d+)\]/gm.exec(t);if(n&&3==n.length){let o=n[1],c=parseInt(n[2]);e[o]&&Array.isArray(e[o])||(e[o]=[]),e[o][c]=e[t],delete e[t],t=o}}catch{}return t}function o(t){return!!t&&t.constructor===Object}function c(t){return!!t&&t.constructor===Array}function r(o){let c=Object.keys(o),r={};return c.forEach((c=>{if((c=n(c,o)).split(".").length>1){let n=e(o[c],c);delete o[c],r=t(r,n)}else r[c]=o[c]})),r}function i(t){let e=Object.keys(t),n={};return e.forEach((e=>{let r=t[e];if(o(t[e])){let o=i(t[e]);Object.keys(o).forEach((t=>{let c=o[t];n[t=e+"."+t]=c}))}else c(r)?r.forEach(((t,o)=>{n[`${e}[${o}]`]=t})):n[e]=t[e]})),n}function a(t){if(t)return{collection:t.getAttribute("data-collection"),document_id:t.getAttribute("data-document_id"),name:t.getAttribute("name")}}function s(t){return t?{is_realtime:f(t),is_save:l(t),is_read:u(t),is_update:d(t)}:{}}const u=t=>m(t,"data-read_value"),l=t=>m(t,"data-save_value"),d=t=>m(t,"data-update_value"),f=t=>!!t&&"false"!=t.getAttribute("data-realtime");function m(t,e){return!!t&&"false"!==t.getAttribute(e)}function p(t){return!!t&&!/{{\s*([\w\W]+)\s*}}/g.test(t)}function h(t){try{let e=JSON.parse(t);return"object"==typeof e&&null!=e}catch(t){return!1}}function g(t){const{collection:e,document_id:n,name:o}=a(t);return!(h(e)||h(o)||!("INPUT"===t.tagName&&["text","email","tel","url"].includes(t.type)||"TEXTAREA"===t.tagName)||!o||!f(t)||"true"===t.getAttribute("data-unique")||"password"===t.type||!u(t))}function k(t){try{return!!t&&"null"!==t.toLowerCase()}catch(t){return!1}}return{decodeObject:r,encodeObject:i,getAttr:a,getFlagAttr:s,isRealtimeAttr:f,isReadAttr:u,isSaveAttr:l,isUpdateAttr:d,checkValue:p,isCRDT:g,checkDocumentId:k}}()}.apply(e,[]))||(t.exports=n)}}]);