(this.webpackChunkCoCreate=this.webpackChunkCoCreate||[]).push([[5520],{23822:function(t,e,i){var s,n;"undefined"!=typeof self&&self,s=[i(76350),i(34134)],void 0===(n=function(t,e){return function(t,e,i){if(t){let t=new e("ws");i.setSocket(t),i.createSocket(window.config.host?window.config.host:window.location.hostname,window.config.organization_Id)}return i}(!0,t,e)}.apply(e,s))||(t.exports=n)},34134:function(t,e,i){var s,n;"undefined"!=typeof self&&self,s=[i(56447)],void 0===(n=function(t){return function(t,e){return{socket:null,setSocket:function(t){this.socket=t},send:function(t){let i=e.getCommonParams();if(!t||!t.emit)return;i={...i,...t};const s=e.generateSocketClient(t.namespace,t.room);this.socket.send("sendMessage",i,s)},receive:function(t,e){this.socket.listen(t,e)},createSocket:function(t,e){this.socket&&(e?(this.socket.create({namespace:e,room:null,host:t}),this.socket.setGlobalScope(e)):this.socket.create({namespace:null,room:null,host:t}))},listen:function(t,e){this.socket.listen(t,e)},listenAsync:function(t){return this.socket.listenAsync(t)}}}(window,t)}.apply(e,s))||(t.exports=n)},543:(t,e,i)=>{"use strict";i.r(e),i.d(e,{default:()=>n}),window.profiler={},window.counter=0,window.counter2=0,window.targets={},window.attributeName={},Element.prototype.matches||(Element.prototype.matches=Element.prototype.matchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector||Element.prototype.oMatchesSelector||Element.prototype.webkitMatchesSelector||function(t){for(var e=(this.document||this.ownerDocument).querySelectorAll(t),i=e.length;--i>=0&&e.item(i)!==this;);return i>-1});const s={initTasks:new Map,attrTasks:new Map,rules:new Map,rulesArray:[],__init:function(){const t=this;new MutationObserver(((e,i)=>t.__callback(e,i))).observe(document.body,{attributes:!0,childList:!0,subtree:!0,characterData:!1,attributeOldValue:!0,characterData:!0})},init:function({observe:t,include:e,exclude:i,attributes:s,name:n,callback:o}){t.some((t=>"childList"==t))&&this.initTasks.set(o,{observe:t,include:e,exclude:i,attributes:s,name:n}),t.some((t=>"attributes"==t))&&this.attrTasks.set(o,{observe:t,include:e,exclude:i,attributes:s,name:n})},remove:function(t){this.initTasks.delete(t),this.attrTasks.delete(t)},addRule:function({include:t,exclude:e,name:i}){this.rules.set(i,{include:t,exclude:e}),this.rulesArray=Array.from(this.rules)},removeRule:function({name:t}){this.rules.delete(t),this.rulesArray=Array.from(this.rules)},__callback:function(t,e){window.counter++;for(let e of t)"childList"==e.type&&e.addedNodes.length>0&&this.__initCallback(e),"attributes"==e.type&&this.__attrCallback(e)},__initCallback:function(t){let e=Array.from(t.addedNodes);this.initTasks.forEach((({observe:e,include:i,exclude:s,attributes:n,name:o},a)=>{t.addedNodes.forEach((e=>{e.tagName&&(!i||e.matches(i)||e.querySelector(i))&&(s&&(e.matches(s)||e.querySelector(s))||e.created||(window.counter2++,window.profiler[o]=null!=window.profiler[o]?window.profiler[o]+1:0,window.targets[t.target.id||t.target.tagName]=null!=window.targets[t.target.id||t.target.tagName]?window.targets[t.target.id||t.target.tagName]+1:0,window.attributeName[t.attributeName]=null!=window.attributeName[t.attributeName]?window.attributeName[t.attributeName]+1:0,a.apply(null,[{type:t.type,target:e}])))}))})),e.map((t=>t.created=!0))},__attrCallback:function(t){for(let[e,{include:i,exclude:s}]of this.rulesArray){if(i&&!t.target.matches(i))return;if(s&&t.target.matches(s))return}this.attrTasks.forEach((({observe:e,include:i,exclude:s,attributes:n,name:o},a)=>{if((!n||!t.attributeName||n.includes(t.attributeName))&&(!i||t.target.matches(i))&&(!s||!t.target.matches(s))&&t.attributeName){t.target.getAttribute(t.attributeName)!=t.oldValue&&(window.counter2++,window.profiler[o]=null!=window.profiler[o]?window.profiler[o]+1:0,window.targets[t.target.id||t.target.tagName]=null!=window.targets[t.target.id||t.target.tagName]?window.targets[t.target.id||t.target.tagName]+1:0,window.attributeName[t.attributeName]=null!=window.attributeName[t.attributeName]?window.attributeName[t.attributeName]+1:0,a.apply(null,[t]))}}))},setInitialized:function(t,e){t["co_initialized_"+(e=e||"")]=!0},getInitialized:function(t,e){return!!t["co_initialized_"+(e=e||"")]}};s.__init();const n=s},56447:function(t,e){var i;"undefined"!=typeof self&&self,void 0===(i=function(){return function(t){function e(){let e={};return t&&t.config&&(e=t.config),{apiKey:e.apiKey,securityKey:e.securityKey,organization_id:e.organization_Id}}function i(e){let i={};return t&&t.config&&(i=t.config),{apiKey:e.apiKey||i.apiKey,securityKey:e.securityKey||i.securityKey,organization_id:e.organization_id||i.organization_Id}}function s(e,i){let s={};t&&t.config&&(s=t.config);let n=e||s.organization_Id,o=i||"";return o?`${n}/${o}`:n}function n(t=36){let e=(new Date).getTime(),i=0,s="uxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx";if(t<=s.length)s=s.substr(0,t);else{let e=t-s.length,i="-xxxyyxxx",n=Math.floor(e/i.length);for(let t=0;t<n;t++)s+=i;n=e-n*i.length,s+=i.substr(0,n)}return s.replace(/[xy]/g,(function(t){var s=16*Math.random();return e>0?(s=(e+s)%16|0,e=Math.floor(e/16)):(s=(i+s)%16|0,i=Math.floor(i/16)),("x"==t?s:7&s|8).toString(16)}))}return{getCommonParams:e,getCommonParamsExtend:i,generateSocketClient:s,GenerateUUID:n}}(window)}.apply(e,[]))||(t.exports=i)},76350:function(t,e,i){var s,n;"undefined"!=typeof self&&self,s=[i(56447)],void 0===(n=function(t){return function(t,e,i,s){class n{constructor(t="crud"){this.prefix=t||"crud",this.sockets=new Map,this.listeners=new Map,this.messageQueue=new Map,this.saveFileName="",this.globalScope=""}setGlobalScope(t){this.globalScope=`${this.prefix}/${t}`}getGlobalScope(){return this.globalScope}create(t){const{namespace:n,room:o}=t,a=this.getKey(n,o);let r,l=this;if(n&&this.setGlobalScope(n),this.sockets.get(a))return void(r=this.sockets.get(a));let h=e.location.protocol;"about:"===e.location.protocol&&(h=e.parent.location.protocol,t.host||(t.host=e.parent.location.host));let d="http:"===h?"ws":"wss";const c=t.port?t.port:8088;let u=`${d}://${e.location.host}:${c}/${a}`;t.host&&(u=t.host.includes("://")?`${t.host}/${a}`:t.host.includes(":")?`${d}://${t.host}/${a}`:`${d}://${t.host}:${c}/${a}`);try{r=new i(u)}catch(t){return}r.onopen=function(t){(l.messageQueue.get(a)||[]).forEach((t=>r.send(JSON.stringify(t)))),l.sockets.set(a,r),l.messageQueue.set(a,[])},r.onclose=function(e){switch(e.code){case 1e3:break;default:l.destroy(r,a),l.reconnect(r,t)}},r.onerror=function(e){l.destroy(r,a),l.reconnect(r,t)},r.onmessage=function(t){try{if(e.Blob&&t.data instanceof s)return void l.saveFile(t.data);let n=JSON.parse(t.data);if(n.data.event){if(e.CustomEvent){var i=new e.CustomEvent(n.data.event,{detail:n.data});return void e.document.dispatchEvent(i)}return void process.emit(n.data.event,n.data)}n.action;const o=l.listeners.get(n.action);if(!o)return;o.forEach((t=>{t(n.data,a)}))}catch(t){}}}send(e,i,s){const n={action:e,data:{...i,uid:t.GenerateUUID()}},o=this.getKeyByRoom(s),a=this.getByRoom(s);a?a.send(JSON.stringify(n)):this.messageQueue.get(o)?this.messageQueue.get(o).push(n):this.messageQueue.set(o,[n])}sendFile(t,e){const i=this.getByRoom(e);i&&i.send(t)}listen(t,e){this.listeners.get(t)?this.listeners.get(t).push(e):this.listeners.set(t,[e])}reconnect(t,e){let i=this;setTimeout((function(){i.create(e)}),1e3)}destroy(t,e){t&&(t.onerror=t.onopen=t.onclose=null,t.close(),t=null),this.sockets.get(e)&&this.sockets.delete(e)}destroyByKey(t){let e=this.sockets.get(t);e&&this.destroy(e,t)}getKey(t,e){let i=`${this.prefix}`;return t&&""!=t&&(i+=e&&""!=e?`/${t}/${e}`:`/${t}`),i}getByRoom(t){let e=this.getKeyByRoom(t);return this.sockets.get(e)}getKeyByRoom(t){let e=this.globalScope;return t&&(e=`${this.prefix}/${t}`),e}saveFile(t){if(e.document){const s=this.saveFileName||"downloadFile";var i=e.document.createElement("a");e.document.body.appendChild(i),i.style="display: none";let n=window.URL.createObjectURL(t);i.href=n,i.download=s,i.click(),e.URL.revokeObjectURL(n),this.saveFileName=""}}listenAsync(t){return new Promise(((i,s)=>{e.document?e.document.addEventListener(t,(function(t){i(t.detail)}),{once:!0}):process.once(t,(t=>{i(t)}))}))}}return n}(t,window,WebSocket,Blob)}.apply(e,s))||(t.exports=n)},67819:(t,e,i)=>{"use strict";function s(t=36){let e=(new Date).getTime(),i=window.performance&&window.performance.now&&1e3*window.performance.now()||0,s="uxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx";if(t<=s.length)s=s.substr(0,t);else{let e=t-s.length,i="-xxxyyxxx",n=Math.floor(e/i.length);for(let t=0;t<n;t++)s+=i;n=e-n*i.length,s+=i.substr(0,n)}return s.replace(/[xy]/g,(function(t){var s=16*Math.random();if(e>0){s=(e+s)%16|0;e=Math.floor(e/16)}else{s=(i+s)%16|0;i=Math.floor(i/16)}return("x"==t?s:7&s|8).toString(16)}))}function n(t,e,i){if(e){if(t.classList.contains(e))return t;let i=t.parentNode;for(;null!=i&&i.classList;){if(i.classList.contains(e))return i;i=i.parentNode}}else if(i){if(i.every((e=>t.attributes.hasOwnProperty(e))))return t;let e=t.parentNode;for(;null!=e&&e.attributes;){if(i.every((t=>e.attributes.hasOwnProperty(t))))return e;e=e.parentNode}}return!1}function o(t){try{let e=JSON.parse(t);return"object"==typeof e&&null!=e}catch(t){return!1}}function a(t){return t.getAttributeNames().reduce(((e,i)=>(e[i]=t.getAttribute(i),e)),{})}function r(t){return!!t&&!/{{\s*([\w\W]+)\s*}}/g.test(t)}function l(t){let e=[{document,window}];for(let t of document.querySelectorAll("iframe")){let i=t.contentDocument||t.contentWindow.document,s=t.contentWindow;e.push({document:i,window:s,frameElement:t})}let i=new Set;for(let s of e){let e=t(s);e&&"function"==typeof e[Symbol.iterator]?e.forEach((t=>i.add(t))):e&&i.add(e)}return Array.from(i)}function h(t){let e=[];do{if(!t||!t.tagName)return!1;let i=t.tagName.toLowerCase();if(t.id&&"BODY"!==t.tagName&&(i+="#"+t.id),t.classList.length&&"BODY"!==t.tagName&&t.classList.forEach((t=>{-1===t.indexOf(":")&&(i+="."+t)})),"BODY"!==t.tagName&&t.parentNode){let e=Array.prototype.indexOf.call(t.parentNode.children,t);i+=`:nth-child(${e+1})`}e.unshift(i),t=t.parentNode}while("HTML"!==t.tagName);return e.join(" > ")}function d(){let t=window;for(;t!==window.parent;)t=window.parent;return t}function c(t,e){let i;return l((t=>{t.document.contains(e)&&(i=t.frameElement)})),i}function u(t){let e=d;return t.forEach((t=>{e&&(e=e.querySelector(t))})),e}function*f(t,e){for(let i of t)i.selector&&e.matches(i.selector)&&(yield i)}function m(t,e,i,s){for(let n of f(s||window.elementConfig,t)){if(!0===n[e])return i(t,n);if(!1===n[e])return!1;if(void 0===n[e])continue;if(_(n[e]))return i(t,n,!0)}return!1}function p(t=10){for(var e="",i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",s=i.length,n=0;n<t;n++)e+=i.charAt(Math.floor(Math.random()*s));return e+=(new Date).toTimeString().replace(/[\W_]+/g,"").substr(0,6)}function g(t){let e=(new DOMParser).parseFromString(t,"text/html");return e.head.children[0]?e.head.children[0]:e.body.children[0]}function w(t,e){return t.split(e).map((t=>t.trim()))}function y(t,e){return t.map((t=>t.trim())).join(e)}function _(t){try{document.createDocumentFragment().querySelector(t)}catch(t){return!1}return!0}function v(t,e){let i=[],s=(window,c(0,t)),n=h(s);return n&&i.unshift(n),e?{path:i,document:s||document}:i}i.r(e),i.d(e,{generateUUID:()=>s,getParentFromElement:()=>n,isJsonString:()=>o,getAttributes:()=>a,checkValue:()=>r,allFrame:()=>l,cssPath:()=>h,getTopMostWindow:()=>d,findIframeFromElement:()=>c,getIframeFromPath:()=>u,configMatch:()=>f,configExecuter:()=>m,UUID:()=>p,parseTextToHtml:()=>g,splitBydelimiter:()=>w,joinBydelimiter:()=>y,isValidSelector:()=>_,getElementPath:()=>v,default:()=>x});const x={getElementPath:v,isValidSelector:_,joinBydelimiter:y,splitBydelimiter:w,parseTextToHtml:g,UUID:p,configExecuter:m,configMatch:f,getIframeFromPath:u,findIframeFromElement:c,getTopMostWindow:d,cssPath:h,allFrame:l,checkValue:r,getAttributes:a,isJsonString:o,getParentFromElement:n,generateUUID:s}},28942:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s,n=(s=i(55382))&&s.__esModule?s:{default:s};function o(t){this.modals=[],this.el=t,this.modalClass=this.el.getAttribute("data-modal-class"),this.SELECT_ZINDEX=10,this.UNSELECT_ZINDEX=2,this.ghostEl=null,this.width=0,this.height=0,this.selectedModal=null,this.modalClass||(this.modalClass="modal"),this._createGhost(this.el.getAttribute("data-ghost-class")),this._initModals(),this._initEvent()}o.prototype={_createGhost:function(t){var e=document.createElement("div");t||(t="modal-ghost"),e.classList.add(t),this.el.appendChild(e),this.ghostEl=e},_initModals:function(){for(var t=document.querySelectorAll("."+this.modalClass),e=0;e<t.length;e++)this.modals.push(new n.default(t[e],{},this.el));this.selectedModal||this._selectModal(this.modals[this.modals.length-1])},_initEvent:function(){let t=this;this.el.addEventListener("mousemove",(function(e){e.preventDefault(),t.selectedModal&&t.selectedModal._onMove(e)})),this.el.addEventListener("mouseup",(function(e){t.selectedModal&&t.selectedModal._onUp(e),e.preventDefault()}),!0),this.el.addEventListener("touchmove",(function(e){t.selectedModal&&t.selectedModal._onMove(e.touches[0])})),this.el.addEventListener("touchend",(function(e){t.selectedModal&&t.selectedModal._onUp(e.touches[0])})),this.el.addEventListener("cocreate-selectmodal",(function(e){t.selectedModal&&t._selectModal(e.detail.modal)})),this.el.addEventListener("cocreate-modalghost",(function(e){t.selectedModal&&t._ghostProcess(e.detail)})),this.el.addEventListener("cocreate-removemodal",(function(e){t.selectedModal&&t._removeModal(e.detail.modal)})),this._initResizeEvent()},_initResizeEvent:function(){var t=this,e=this.el.getBoundingClientRect();this.width=e.width,this.height=e.height,new ResizeObserver(((e,i)=>{let s=e[0].contentRect;t._resizeProcess(t.width,t.height,s.width,s.height)})).observe(this.el)},_resizeProcess(t,e,i,s){if(this.width=i,this.height=s,t==i&&e==s)return;let n=i-t,o=s-e;for(var a=0;a<this.modals.length;a++)this.modals[a].resize(n,o,i,s)},_createModal:function(t){var e=document.createElement("div");e.classList.add(this.modalClass),e.style.zIndex=this.SELECT_ZINDEX,this.el.appendChild(e);var i=new n.default(e,t,this.el);this.modals.push(i),this._selectModal(e)},_releaseSelect:function(){this.selectedModal&&(this.selectedModal.el.style.zIndex=this.UNSELECT_ZINDEX,this.selectedModal.el.classList.remove("modal_selected"),this.selectedModal=null)},_selectModal:function(t){let e=this._findModalByElement(t);e!=this.selectedModal&&(this._releaseSelect(),this.selectedModal=e,this.selectedModal&&(this.selectedModal.el.style.zIndex=this.SELECT_ZINDEX,this.selectedModal.el.classList.add("modal_selected"),this.ghostEl.style.width=0,this.ghostEl.style.height=0))},_findModalByElement:function(t){if(t instanceof n.default)return t;for(var e=0;e<this.modals.length;e++)if(this.modals[e].el.isEqualNode(t))return this.modals[e];return null},getModalById:function(t){for(var e=0;e<this.modals.length;e++)if(this.modals[e].id==t)return this.modals[e];return null},_ghostProcess:function(t){this.ghostEl.style.left=t.x+"px",this.ghostEl.style.top=t.y+"px",this.ghostEl.style.width=t.w+"px",this.ghostEl.style.height=t.h+"px","show"===t.type?("none"===this.ghostEl.style.display&&(this.ghostEl.style.display="block"),this.ghostEl.style.opacity=.2):(this.ghostEl.style.opacity=0,"none"!==this.ghostEl.style.display&&(this.ghostEl.style.display="none"))},_removeModal:function(t){for(var e=0;e<this.modals.length;e++)if(this.modals[e]===t){this.el.removeChild(t.el),this.modals.splice(e,1);break}this.modals.length>0?this._selectModal(this.modals[this.modals.length-1]):this.selectedModal=null,this.el.style.pointerEvents="none"}};var a=o;e.default=a},41452:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s=r(i(28942)),n=i(36297),o=(r(i(543)),r(i(67819))),a=r(i(23822));function r(t){return t&&t.__esModule?t:{default:t}}function l(t){let e=t||"modal-viewport";this.container=null,this.id=e,this.pageId=(0,n.generateUUID)(20),this.isRoot=this._checkRoot(),this.isRoot?(n.ModalStorage.rootPageId=this.pageId,this.rootId=this.pageId,this.parentId=this.pageId):(this.parentId=n.ModalStorage.parentPageId,this.pageId=n.ModalStorage.pageId,this.rootId=n.ModalStorage.rootPageId),this._createContainer(),this._initWndButtons(),this._initSocket();var i=document.querySelector("html");i.setAttribute("test-parent_id",this.parentId),i.setAttribute("test-page_id",this.pageId)}i(5329),l.prototype={_checkRoot:function(){try{return window.self===window.top}catch(t){return!1}},_createContainer:function(){if(this.container)return!0;var t=document.getElementById(this.id);return!!t&&(this.container=new s.default(t),!0)},_initWndButtons:function(){var t=document.querySelectorAll(".btn-modal-close"),e=document.querySelector(".btn-modal-maximize"),i=document.querySelector(".btn-modal-minimize"),s=this;if(t.length>0)for(var n=0;n<t.length;n++){t[n].addEventListener("click",(function(t){t.preventDefault(),s.sendWindowBtnEvent("close")}))}e&&e.addEventListener("click",(function(t){t.preventDefault(),s.sendWindowBtnEvent("maximize")})),i&&i.addEventListener("click",(function(t){t.preventDefault(),s.sendWindowBtnEvent("park")}))},sendWindowBtnEvent:function(t){var e={apiKey:config.apiKey,securityKey:config.securityKey,organization_id:config.organization_Id,data:{parentId:this.parentId,pageId:this.pageId,type:t,author:"jin"}};a.default.send("windowBtnEvent",e)},_initSocket:function(){var t=this;a.default.listen("openWindow",(function(e){e.parentId==t.pageId&&t.container._createModal(e)})),a.default.listen("windowBtnEvent",(function(e){if(e.parentId==t.pageId){var i=e.pageId,s=e.type,n=t.container.getModalById(i);if(n)switch(s){case"close":t.container._removeModal(n);break;case"maximize":n._setMaximize();break;case"park":n.togglePark()}}}))},open:function(t){this.openWindow(t)},openWindow:function(t){var e={url:t.getAttribute("href"),x:t.getAttribute("data-modal_x"),y:t.getAttribute("data-modal_y"),width:t.getAttribute("data-modal_width"),height:t.getAttribute("data-modal_height"),ajax:t.getAttribute("data-modal_ajax"),color:t.getAttribute("data-modal_color"),header:t.getAttribute("data-modal_header")?t.getAttribute("data-modal_header"):"true",attributes:o.default.getAttributes(t)},i=t.getAttribute("data-modal_open");i=i||"root",n.ModalStorage.rootPageId=this.rootId;var s=i;switch(i){case"parent":s=this.parentId;break;case"page":s=this.pageId;break;case"root":s=this.rootId;break;default:s=i}n.ModalStorage.parentPageId=s,e.parentId=s,this.isRoot?this._createContainer()&&this.container._createModal(e):a.default.send("openWindow",{apiKey:config.apiKey,securityKey:config.securityKey,organization_id:config.organization_Id,data:e})}};var h=new l;e.default=h},55382:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s=i(36297);function n(t,e,i){if(!t||!t.nodeType||1!==t.nodeType)return;this.MARGIN=5,this.FULLSCREEN_MARGIN=-20,this.NO_SNAP=-31,this.SNAP_MARGIN=-10,this.RIGHT_SCROL=5;this.id=(0,s.generateUUID)(20),this.el=t,this.clicked=null,this.redraw=!1,this.boundStatus={},this.point={},this.rect={},this.clickedInfo=null,this.preSnapped=null,this.prevRect={},this.isSnap=!1,this.isHeader=!0,this.dragArea=null,this.headerArea=null,this.width=0,this.height=0,this.isParked=!1,this.iframe=null,this.container=i,this.options=Object.assign({minWidth:60,minHeight:40},e),this.el.setAttribute("id",this.id),window.localStorage.setItem("page_id",this.id),this._init(),this._setModalSize(),this._initEvent(),this.__animate()}n.prototype={constructor:n,_init:function(){var t=this.options;this.isAjax=t.ajax?t.ajax:this.el.getAttribute("data-modal_ajax");var e=t.url?t.url:this.el.getAttribute("href"),i=t.width?t.width:this.el.getAttribute("data-modal_width"),n=t.height?t.height:this.el.getAttribute("data-modal_height"),o=t.color?t.color:this.el.getAttribute("data-modal_color"),a=t.x?t.x:this.el.getAttribute("data-modal_x"),r=t.y?t.y:this.el.getAttribute("data-modal_y"),l=t.header?t.header:this.el.getAttribute("data-modal_header"),h=t.attributes;if(this.el.style.width=i&&""!=i?i:"600px",this.el.style.height=n&&""!=n?n:"100%",this.el.parentElement.clientWidth<this.el.clientWidth&&(this.el.style.width="100%"),this.el.parentElement.clientHeight<this.el.clientHeight&&(this.el.style.width="100%"),a&&""!=a)this.el.style.left=a;else{let t=(this.el.parentElement.clientWidth-this.el.offsetWidth)/2;t=t>0?t:0,this.el.style.left=t+"px"}if(r&&""!=r)this.el.style.top=r;else{let t=(this.el.parentElement.clientHeight-this.el.offsetHeight)/2;t=t>0?t:0,this.el.style.top=t+"px"}o&&""!==o&&(this.el.style.borderColor=o),"true"==l?(this.isHeader=!0,this._createTitle()):(this.isHeader=!1,this._createDragArea()),this.el.innerHTML=this.el.innerHTML+'<div class="parked-closeBtn"><i class="fas fa-times closeBtn"></i></div>';let d=null;if(e&&""!=e)d=this.__createContainer(this.headerArea),d.src=e;else{if(!h)return;d=this.__createContainer(this.headerArea,"false"===h["data-modal_iframe"]?"div":"iframe"),h["data-pass_to"]&&(d.setAttribute("data-pass_id",h["data-pass_to"]),d.setAttribute("data-collection",""),d.setAttribute("data-document_id",""),d.setAttribute("data-request_id",(0,s.generateUUID)(20))),h["data-pass_name"]&&d.setAttribute("name",h["data-pass_name"])}this.el.appendChild(d),this.iframe=d},__createContainer:function(t,e){const i=e||"iframe";let s=document.createElement(i);return s.style.width="100%",s.style.height="100%",t&&(s.style.height="calc(100% - 45px)"),"iframe"!=e&&s.setAttribute("class","domEditor"),s},_initEvent:function(){let t=this;this.iframe&&this.iframe.addEventListener("load",(function(){const e=t.iframe.contentDocument;e.querySelector(".nav");e.addEventListener("click",(function(){var e=new CustomEvent("cocreate-selectmodal",{detail:{modal:t}});t.el.parentNode.dispatchEvent(e)}))})),this.el.addEventListener("click",(function(e){var i=new CustomEvent("cocreate-selectmodal",{detail:{modal:t}});t.el.parentNode.dispatchEvent(i)}),!0),this.el.addEventListener("dblclick",(function(e){t.isParked&&(t.isParked=!1,t.el.classList.remove("modal-parked"))})),this.el.addEventListener("modal-resizing",(function(t){})),this.el.addEventListener("touchstart",(function(e){t.changeRightDragEl(!0);var i=new CustomEvent("cocreate-selectmodal",{detail:{modal:t}});t.el.parentNode.dispatchEvent(i),t._onDown(e.touches[0])})),this.el.addEventListener("mousemove",(function(e){t.changeRightDragEl(!1)})),this.el.addEventListener("mousedown",(function(e){var i=new CustomEvent("cocreate-selectmodal",{detail:{modal:t}});t.el.parentNode.dispatchEvent(i),t._onDown(e)})),this.el.addEventListener("mouseup",(function(t){})),this._addButtonEvent(),this.el.addEventListener("modal-resizeend",(function(e){t._saveFetch()})),this.el.addEventListener("modal-moveend",(function(e){t._saveFetch()}))},changeRightDragEl:function(t=!0){const e=this.el.querySelector(".modal-drag-area-right"),i=t?"0px":"-10px";e&&(e.style.right=i),this.RIGHT_SCROL=t?5:0},_addButtonEvent:function(){var t=this;this.el.querySelector(".modal-title-area .closeBtn")&&this.el.querySelector(".modal-title-area .closeBtn").addEventListener("click",(function(e){e.preventDefault(),t.el.parentNode.dispatchEvent(new CustomEvent("cocreate-removemodal",{detail:{modal:t}}))})),this.el.querySelector(".parked-closeBtn .closeBtn")&&this.el.querySelector(".parked-closeBtn .closeBtn").addEventListener("click",(function(e){e.preventDefault(),t.el.parentNode.dispatchEvent(new CustomEvent("cocreate-removemodal",{detail:{modal:t}}))})),this.el.querySelector(".modal-title-area .maximizeBtn")&&this.el.querySelector(".modal-title-area .maximizeBtn").addEventListener("click",(function(e){e.preventDefault(),t._setMaximize()})),this.el.querySelector(".modal-title-area .minimizeBtn")&&this.el.querySelector(".modal-title-area .minimizeBtn").addEventListener("click",(function(e){e.preventDefault(),t.togglePark()}))},togglePark:function(){this.isParked?(this.isParked=!1,this.el.classList.remove("modal-parked")):(this.isParked=!0,this.el.classList.add("modal-parked"))},_setModalSize:function(){let t=this.el.getBoundingClientRect(),e=this.el.parentNode.getBoundingClientRect();this.width=t.width,this.height=t.height,this.el.style.left=t.left-e.left,this.el.style.top=t.top-e.top},_saveFetch:function(){this.el.classList.contains("domEditor")&&CoCreateHtmlTags.save(this.el)},_onMove:function(t){this.__getBoundStatus(t);this.redraw=!0},_onDown:function(t){this.__getBoundStatus(t);var e=this.boundStatus.isRight||this.boundStatus.isLeft||this.boundStatus.isTop||this.boundStatus.isBottom;this.clickedInfo={x:this.point.x,y:this.point.y,cx:this.point.cx,cy:this.point.cy,w:this.rect.width,h:this.rect.height,isResizing:e,isMoving:!e&&this._isMovable(),boundStatus:this.boundStatus,isChangeStart:!0}},_onUp:function(t){if(t&&this.__getBoundStatus(t),this.clickedInfo){if(this.clickedInfo.isMoving&&!this.isParked){let t=this.el.parentNode.offsetWidth,i=this.el.parentNode.offsetHeight,s=null;this.__between(this.rect.top,this.NO_SNAP,this.FULLSCREEN_MARGIN)||this.__between(this.rect.left,this.NO_SNAP,this.FULLSCREEN_MARGIN)||this.__between(t-this.rect.right,this.NO_SNAP,this.FULLSCREEN_MARGIN)||this.__between(i-this.rect.bottom,this.NO_SNAP,this.FULLSCREEN_MARGIN)?s={x:0,y:0,w:"100%",h:"100%"}:this.__between(this.rect.top,this.NO_SNAP,this.SNAP_MARGIN)?s={x:0,y:0,w:"100%",h:"50%"}:this.__between(this.rect.left,this.NO_SNAP,this.SNAP_MARGIN)?s={x:0,y:0,w:"50%",h:"100%"}:this.__between(t-this.rect.right,this.NO_SNAP,this.SNAP_MARGIN)?s={x:"50%",y:0,w:"50%",h:"100%"}:this.__between(i-this.rect.bottom,this.NO_SNAP,this.SNAP_MARGIN)&&(s={x:0,y:"50%",w:"100%",h:"50%"}),s&&!this.isSnap&&(this.__setBound(this.el,s.x,s.y,s.w,s.h),this.preSnapped={x:this.rect.x,y:this.rect.y,width:this.rect.width,height:this.rect.height},this.isSnap=!0);var e={x:this.rect.x,y:this.rect.y,w:this.rect.width,h:this.rect.height};this.el.parentNode.dispatchEvent(new CustomEvent("cocreate-modalghost",{detail:e}))}this.clickedInfo.isResizing?(this.createModalEvent("modal-resizeend"),this._setModalSize(),this.isSnap=!1):this.clickedInfo.isMoving&&this.createModalEvent("modal-moveend"),this.clickedInfo=null}},__setBound:function(t,e,i,s,n){this.el.offsetHeight,this.el.clientHeight,this.el.offsetWidth,this.el.clientWidth;t.style.left=e,t.style.top=i,t.style.width=s,t.style.height=n},__setRectInfo:function(){let t=this.el.getBoundingClientRect(),e=this.el.parentNode.getBoundingClientRect();this.rect={},this.rect.x=t.x-e.x,this.rect.y=t.y-e.y,this.rect.width=t.width,this.rect.height=t.height,this.rect.top=t.top-e.top,this.rect.bottom=t.bottom-e.top,this.rect.left=t.left-e.left,this.rect.right=t.right-e.left},__getBoundStatus:function(t){let e=this.el.getBoundingClientRect(),i=this.el.parentNode.getBoundingClientRect(),s=t.clientX-e.left,n=t.clientY-e.top;return this.__setRectInfo(),this.point.x=s,this.point.y=n,this.point.cx=t.clientX-i.left,this.point.cy=t.clientY-i.top,this.boundStatus={isTop:n<this.MARGIN&&n>-this.MARGIN,isLeft:s<this.MARGIN&&s>-this.MARGIN,isRight:s>=e.width-this.RIGHT_SCROL&&s<=e.width+this.MARGIN+(this.MARGIN-this.RIGHT_SCROL),isBottom:n>=e.height-this.MARGIN&&n<=e.height+this.MARGIN},this.boundStatus},__between:function(t,e,i){return t>=e&&t<=i},__animate:function(){let t=this;if(requestAnimationFrame((function(){t.__animate()})),!this.redraw)return;this.redraw=!1;let e=this.clickedInfo;var i=null;if(e&&e.isResizing&&!this.isParked){if(e.boundStatus.isRight&&(this.el.style.width=Math.max(this.point.x,this.options.minWidth)+"px"),e.boundStatus.isBottom&&(this.el.style.height=Math.max(this.point.y,this.options.minHeight)+"px"),e.boundStatus.isLeft){var s=Math.max(e.cx-this.point.cx+e.w,this.options.minWidth);s>this.options.minWidth&&(this.el.style.width=s+"px",this.el.style.left=this.point.cx+"px")}if(e.boundStatus.isTop){var n=Math.max(e.cy-this.point.cy+e.h,this.options.minHeight);n>this.options.minHeight&&(this.el.style.height=n+"px",this.el.style.top=this.point.cy+"px")}return i="modal-resizing",e.isChangeStart&&(this.clickedInfo.isChangeStart=!1,i="modal-resizestart"),void this.createModalEvent(i)}if(e&&e.isMoving){let t=this.el.parentNode.offsetWidth,s=this.el.parentNode.offsetHeight,n=null;return n=this.__between(this.rect.top,this.NO_SNAP,this.FULLSCREEN_MARGIN)||this.__between(this.rect.left,this.NO_SNAP,this.FULLSCREEN_MARGIN)||this.__between(t-this.rect.right,this.NO_SNAP,this.FULLSCREEN_MARGIN)||this.__between(s-this.rect.bottom,this.NO_SNAP,this.FULLSCREEN_MARGIN)?{x:0,y:0,w:t,h:s,type:"show"}:this.__between(this.rect.top,this.NO_SNAP,this.SNAP_MARGIN)?{x:0,y:0,w:t,h:s/2,type:"show"}:this.__between(this.rect.left,this.NO_SNAP,this.SNAP_MARGIN)?{x:0,y:0,w:t/2,h:s,type:"show"}:this.__between(t-this.rect.right,this.NO_SNAP,this.SNAP_MARGIN)?{x:t/2,y:0,w:t/2,h:s,type:"show"}:this.__between(s-this.rect.bottom,this.NO_SNAP,this.SNAP_MARGIN)?{x:0,y:s/2,w:t,h:s/2,type:"show"}:{x:this.rect.left,y:this.rect.top,w:this.rect.width,h:this.rect.height,type:"hide"},!n||this.isParked||this.isSnap||this.el.parentNode.dispatchEvent(new CustomEvent("cocreate-modalghost",{detail:n})),this.isSnap?(this.el.style.left=this.point.cx+"px",this.el.style.top=this.point.cy+"px",this.el.style.width=this.preSnapped.width+"px",this.el.style.height=this.preSnapped.height+"px",this.isSnap=!1):(this.el.style.top=this.point.cy-e.y+"px",this.el.style.left=this.point.cx-e.x+"px"),i="modal-moving",e.isChangeStart&&(this.clickedInfo.isChangeStart=!1,i="modal-movestart"),void this.createModalEvent(i)}this.redraw=!1,this._setCursor(this.boundStatus)},_setMaximize(){this.isSnap?(this.isSnap=!1,this.el.style.left=this.preSnapped.x+"px",this.el.style.top=this.preSnapped.y+"px",this.el.style.width=this.preSnapped.width+"px",this.el.style.height=this.preSnapped.height+"px"):(this.isSnap=!0,this.preSnapped={x:this.rect.x,y:this.rect.y,width:this.rect.width,height:this.rect.height},this.__setBound(this.el,0,0,"100%","100%"))},_setCursor(t){let e="default";!this.isParked&&t.isRight&&t.isBottom||t.isLeft&&t.isTop?e="nwse-resize":!this.isParked&&t.isRight&&t.isTop||t.isBottom&&t.left?e="nwsw-resize":!this.isParked&&t.isRight||t.isLeft?e="ew-resize":!this.isParked&&t.isBottom||t.isTop?e="ns-resize":this._isMovable()&&(e="move"),this.el.style.cursor=e,this.setContainerEvent(e)},setContainerEvent(t){this.container&&(this.container.style.pointerEvents="default"!=t?"auto":"none")},_isMovable(){var t=this.rect.width;return this.isHeader&&(t-=120),this.point.x>0&&this.point.x<t&&this.point.y>0&&this.point.y<50},createModalEvent(t){var e=new CustomEvent(t,{});this.el.dispatchEvent(e)},_createTitle:function(t){this.el.innerHTML='<div class="nav bg-light-gray"><ul class="modal-title-area">\n          <li><a class="minimizeBtn"><i class="far fa-window-minimize"></i></a></li>\n          <li><a class="maximizeBtn"><i class="far fa-window-restore"></i></a></li>\n         \x3c!-- <li><a class="parkBtn"><i class="fas fa-dot-circle "></i></a></li> --\x3e\n          <li><a class="closeBtn"><i class="fas fa-times"></i></a></li>\n      </ul></div>'+this.el.innerHTML,this.headerArea=this.el.querySelector(".modal-title-area")},_createDragArea:function(){this.dragArea=document.createElement("div"),this.dragArea.classList.add("modal-drag-area");let t=document.createElement("div");t.classList.add("modal-drag-area-left");let e=document.createElement("div");e.classList.add("modal-drag-area-right");let i=document.createElement("div");i.classList.add("modal-drag-area-bottom"),this.el.appendChild(this.dragArea),this.el.appendChild(t),this.el.appendChild(e),this.el.appendChild(i)},resize:function(t,e,i,s){if(!this.isSnap){var n=this.el.offsetHeight-this.el.clientHeight;if(i-=this.el.offsetWidth-this.el.clientWidth,s-=n,0!==t&&!this.isPercentDimesion(this.el.style.width)){var o=this.el.offsetWidth;o+this.rect.left>i&&t<0&&(this.el.style.left=this._setDimension(Math.max(0,this.rect.left+t))),this.el.style.width=this._setDimension(Math.min(o,i))}if(0!==e&&!this.isPercentDimesion(this.el.style.height)){var a=this.el.offsetHeight;a+this.rect.top>s&&e<0&&(this.el.style.top=this._setDimension(Math.max(0,this.rect.top+e))),this.el.style.height=this._setDimension(Math.min(a,s))}this.__setRectInfo()}},_setDimension:function(t,e){return e?t+"%":t+"px"},isPercentDimesion:function(t){return!!t&&("string"==typeof t&&"%"===t.substr(-1,1))}};var o=n;e.default=o},36297:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.generateUUID=function(t){for(var e="",i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",s=i.length,n=0;n<t;n++)e+=i.charAt(Math.floor(Math.random()*s));var o=(new Date).toTimeString().replace(/[\W_]+/g,"").substr(0,6);return e+=o},e.ModalStorage=void 0;var i={};e.ModalStorage=i,Object.defineProperty(i,"rootPageId",{get:function(){return window.localStorage.getItem("page_rootId")},set:function(t){window.localStorage.setItem("page_rootId",t)}}),Object.defineProperty(i,"parentPageId",{get:function(){return window.localStorage.getItem("page_parentId")},set:function(t){window.localStorage.setItem("page_parentId",t)}}),Object.defineProperty(i,"pageId",{get:function(){return window.localStorage.getItem("page_id")},set:function(t){window.localStorage.setItem("page_id",t)}})},5329:(t,e,i)=>{"use strict";i.r(e)}}]);