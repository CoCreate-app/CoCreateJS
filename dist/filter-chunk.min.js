(this.webpackChunkCoCreate=this.webpackChunkCoCreate||[]).push([[225],{91104:function(t,e,n){var r,o;"undefined"!=typeof self&&self,r=[n(11634),n(63198)],void 0===(o=function(t,e){return function(t,e,n){return{socket:null,setSocket:function(t){this.socket=t},readDocumentList(t){if(!t)return;let n=e.getCommonParams();t.collection&&t.operator&&(n={...n,...t},this.socket.send("readDocumentList",n))},createDocument:function(n){if(null===n)return;let r=e.getCommonParamsExtend(n),o={...n,...r},i=n.data||{};i.organization_id||(i.organization_id=t.config.organization_Id),n.data&&(i={...i,...n.data}),o.data=i;const a=e.generateSocketClient(n.namespace,n.room);this.socket.send("createDocument",o,a)},updateDocument:function(t){if(!t||!n.checkDocumentId(t.document_id))return;let r=e.getCommonParamsExtend(t),o={...t,...r};if("object"==typeof t.data&&(o.set=t.data),Array.isArray(t.delete_fields)&&(o.unset=t.delete_fields),!o.set&&!o.unset)return;!1===t.broadcast&&(o.broadcast=!1),void 0===t.broadcast_sender&&(o.broadcast_sender=!0);const i=e.generateSocketClient(t.namespace,t.room);this.socket.send("updateDocument",o,i)},readDocument:function(t){if(null===t)return;if(!t||!n.checkDocumentId(t.document_id))return;let r=e.getCommonParamsExtend(t),o={...t,...r};this.socket.send("readDocument",o)},deleteDocument:function(t){if(!t||!n.checkDocumentId(t.document_id))return;let r=e.getCommonParamsExtend(t),o={...t,...r};const i=e.generateSocketClient(t.namespace,t.room);this.socket.send("deleteDocument",o,i)},exportCollection:function(t){if(null===t)return;let n=e.getCommonParamsExtend(t);n.collection=t.collection,n.export_type=t.export_type,n.metadata=t.metadata,this.socket.send("exportDB",n)},importCollection:function(n){const{file:r}=n;if(null===n||!(r instanceof t.File))return;const o=r.name.split(".").pop();if(!["json","csv"].some((t=>t===o)))return;let i=e.getCommonParamsExtend(n);i.collection=n.collection,i.import_type=o,this.socket.send("importDB",i),this.socket.sendFile(r)},listen:function(t,e){this.socket.listen(t,e)},listenAsync:function(t){return this.socket.listenAsync(t)},createSocket:function(t,e){e?(this.socket.create({namespace:e,room:null,host:t}),this.socket.setGlobalScope(e)):this.socket.create({namespace:null,room:null,host:t})},...n}}(window,t,e)}.apply(e,r))||(t.exports=o)},48032:function(t,e,n){var r,o;"undefined"!=typeof self&&self,r=[n(76315),n(91104)],void 0===(o=function(t,e){return function(t,e,n){if(t){let t=new e("ws");n.setSocket(t),n.createSocket(window.config.host?window.config.host:window.location.hostname,window.config.organization_Id)}return n}(!0,t,e)}.apply(e,r))||(t.exports=o)},63198:function(t,e){var n;"undefined"!=typeof self&&self,void 0===(n=function(){return function(){function t(e,n){e=e||{};for(let r of Object.keys(n))n[r]instanceof Object&&Object.assign(n[r],t(e[r],n[r]));return Object.assign(e||{},n),e}function e(t,e){if(!e)return t;let n=e.split("."),r=t;for(var o=n.length-1;o>=0;o--)r={[n[o]]:r};return r}function n(t,e){try{let n=/([\w\W]+)\[(\d+)\]/gm.exec(t);if(n&&3==n.length){let r=n[1],o=parseInt(n[2]);e[r]&&Array.isArray(e[r])||(e[r]=[]),e[r][o]=e[t],delete e[t],t=r}}catch{}return t}function r(t){return!!t&&t.constructor===Object}function o(t){return!!t&&t.constructor===Array}function i(r){let o=Object.keys(r),i={};return o.forEach((o=>{if((o=n(o,r)).split(".").length>1){let n=e(r[o],o);delete r[o],i=t(i,n)}else i[o]=r[o]})),i}function a(t){let e=Object.keys(t),n={};return e.forEach((e=>{let i=t[e];if(r(t[e])){let r=a(t[e]);Object.keys(r).forEach((t=>{let o=r[t];n[t=e+"."+t]=o}))}else o(i)?i.forEach(((t,r)=>{n[`${e}[${r}]`]=t})):n[e]=t[e]})),n}function c(t){if(t)return{collection:t.getAttribute("data-collection"),document_id:t.getAttribute("data-document_id"),name:t.getAttribute("name")}}function l(t){return t?{is_realtime:f(t),is_save:u(t),is_read:s(t),is_update:d(t)}:{}}const s=t=>m(t,"data-read_value"),u=t=>m(t,"data-save_value"),d=t=>m(t,"data-update_value"),f=t=>!!t&&"false"!=t.getAttribute("data-realtime");function m(t,e){return!!t&&"false"!==t.getAttribute(e)}function h(t){return!!t&&!/{{\s*([\w\W]+)\s*}}/g.test(t)}function p(t){try{let e=JSON.parse(t);return"object"==typeof e&&null!=e}catch(t){return!1}}function g(t){const{collection:e,document_id:n,name:r}=c(t);return!(p(e)||p(r)||!("INPUT"===t.tagName&&["text","email","tel","url"].includes(t.type)||"TEXTAREA"===t.tagName)||!r||!f(t)||"true"===t.getAttribute("data-unique")||"password"===t.type||!s(t))}function y(t){try{return!!t&&"null"!==t.toLowerCase()}catch(t){return!1}}return{decodeObject:i,encodeObject:a,getAttr:c,getFlagAttr:l,isRealtimeAttr:f,isReadAttr:s,isSaveAttr:u,isUpdateAttr:d,checkValue:h,isCRDT:g,checkDocumentId:y}}()}.apply(e,[]))||(t.exports=n)},11634:function(t,e){var n;"undefined"!=typeof self&&self,void 0===(n=function(){return function(t){function e(){let e={};return t&&t.config&&(e=t.config),{apiKey:e.apiKey,securityKey:e.securityKey,organization_id:e.organization_Id}}function n(e){let n={};return t&&t.config&&(n=t.config),{apiKey:e.apiKey||n.apiKey,securityKey:e.securityKey||n.securityKey,organization_id:e.organization_id||n.organization_Id}}function r(e,n){let r={};t&&t.config&&(r=t.config);let o=e||r.organization_Id,i=n||"";return i?`${o}/${i}`:o}function o(t=36){let e=(new Date).getTime(),n=0,r="uxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx";if(t<=r.length)r=r.substr(0,t);else{let e=t-r.length,n="-xxxyyxxx",o=Math.floor(e/n.length);for(let t=0;t<o;t++)r+=n;o=e-o*n.length,r+=n.substr(0,o)}return r.replace(/[xy]/g,(function(t){var r=16*Math.random();return e>0?(r=(e+r)%16|0,e=Math.floor(e/16)):(r=(n+r)%16|0,n=Math.floor(n/16)),("x"==t?r:7&r|8).toString(16)}))}return{getCommonParams:e,getCommonParamsExtend:n,generateSocketClient:r,GenerateUUID:o}}(window)}.apply(e,[]))||(t.exports=n)},76315:function(t,e,n){var r,o;"undefined"!=typeof self&&self,r=[n(11634)],void 0===(o=function(t){return function(t,e,n,r){class o{constructor(t="crud"){this.prefix=t||"crud",this.sockets=new Map,this.listeners=new Map,this.messageQueue=new Map,this.saveFileName="",this.globalScope=""}setGlobalScope(t){this.globalScope=`${this.prefix}/${t}`}getGlobalScope(){return this.globalScope}create(t){const{namespace:o,room:i}=t,a=this.getKey(o,i);let c,l=this;if(o&&this.setGlobalScope(o),this.sockets.get(a))return void(c=this.sockets.get(a));let s=e.location.protocol;"about:"===e.location.protocol&&(s=e.parent.location.protocol,t.host||(t.host=e.parent.location.host));let u="http:"===s?"ws":"wss";const d=t.port?t.port:8088;let f=`${u}://${e.location.host}:${d}/${a}`;t.host&&(f=t.host.includes("://")?`${t.host}/${a}`:t.host.includes(":")?`${u}://${t.host}/${a}`:`${u}://${t.host}:${d}/${a}`);try{c=new n(f)}catch(t){return}c.onopen=function(t){(l.messageQueue.get(a)||[]).forEach((t=>c.send(JSON.stringify(t)))),l.sockets.set(a,c),l.messageQueue.set(a,[])},c.onclose=function(e){switch(e.code){case 1e3:break;default:l.destroy(c,a),l.reconnect(c,t)}},c.onerror=function(e){l.destroy(c,a),l.reconnect(c,t)},c.onmessage=function(t){try{if(e.Blob&&t.data instanceof r)return void l.saveFile(t.data);let o=JSON.parse(t.data);if(o.data.event){if(e.CustomEvent){var n=new e.CustomEvent(o.data.event,{detail:o.data});return void e.document.dispatchEvent(n)}return void process.emit(o.data.event,o.data)}o.action;const i=l.listeners.get(o.action);if(!i)return;i.forEach((t=>{t(o.data,a)}))}catch(t){}}}send(e,n,r){const o={action:e,data:{...n,uid:t.GenerateUUID()}},i=this.getKeyByRoom(r),a=this.getByRoom(r);a?a.send(JSON.stringify(o)):this.messageQueue.get(i)?this.messageQueue.get(i).push(o):this.messageQueue.set(i,[o])}sendFile(t,e){const n=this.getByRoom(e);n&&n.send(t)}listen(t,e){this.listeners.get(t)?this.listeners.get(t).push(e):this.listeners.set(t,[e])}reconnect(t,e){let n=this;setTimeout((function(){n.create(e)}),1e3)}destroy(t,e){t&&(t.onerror=t.onopen=t.onclose=null,t.close(),t=null),this.sockets.get(e)&&this.sockets.delete(e)}destroyByKey(t){let e=this.sockets.get(t);e&&this.destroy(e,t)}getKey(t,e){let n=`${this.prefix}`;return t&&""!=t&&(n+=e&&""!=e?`/${t}/${e}`:`/${t}`),n}getByRoom(t){let e=this.getKeyByRoom(t);return this.sockets.get(e)}getKeyByRoom(t){let e=this.globalScope;return t&&(e=`${this.prefix}/${t}`),e}saveFile(t){if(e.document){const r=this.saveFileName||"downloadFile";var n=e.document.createElement("a");e.document.body.appendChild(n),n.style="display: none";let o=window.URL.createObjectURL(t);n.href=o,n.download=r,n.click(),e.URL.revokeObjectURL(o),this.saveFileName=""}}listenAsync(t){return new Promise(((n,r)=>{e.document?e.document.addEventListener(t,(function(t){n(t.detail)}),{once:!0}):process.once(t,(t=>{n(t)}))}))}}return o}(t,window,WebSocket,Blob)}.apply(e,r))||(t.exports=o)},42336:(t,e,n)=>{"use strict";function r(t=36){let e=(new Date).getTime(),n=window.performance&&window.performance.now&&1e3*window.performance.now()||0,r="uxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx";if(t<=r.length)r=r.substr(0,t);else{let e=t-r.length,n="-xxxyyxxx",o=Math.floor(e/n.length);for(let t=0;t<o;t++)r+=n;o=e-o*n.length,r+=n.substr(0,o)}return r.replace(/[xy]/g,(function(t){var r=16*Math.random();if(e>0){r=(e+r)%16|0;e=Math.floor(e/16)}else{r=(n+r)%16|0;n=Math.floor(n/16)}return("x"==t?r:7&r|8).toString(16)}))}function o(t,e,n){if(e){if(t.classList.contains(e))return t;let n=t.parentNode;for(;null!=n&&n.classList;){if(n.classList.contains(e))return n;n=n.parentNode}}else if(n){if(n.every((e=>t.attributes.hasOwnProperty(e))))return t;let e=t.parentNode;for(;null!=e&&e.attributes;){if(n.every((t=>e.attributes.hasOwnProperty(t))))return e;e=e.parentNode}}return!1}function i(t){try{let e=JSON.parse(t);return"object"==typeof e&&null!=e}catch(t){return!1}}function a(t){return t.getAttributeNames().reduce(((e,n)=>(e[n]=t.getAttribute(n),e)),{})}function c(t){return!!t&&!/{{\s*([\w\W]+)\s*}}/g.test(t)}function l(t){let e=[{document,window}];for(let t of document.querySelectorAll("iframe")){let n=t.contentDocument||t.contentWindow.document,r=t.contentWindow;e.push({document:n,window:r,frameElement:t})}let n=new Set;for(let r of e){let e=t(r);e&&"function"==typeof e[Symbol.iterator]?e.forEach((t=>n.add(t))):e&&n.add(e)}return Array.from(n)}function s(t){let e=[];do{if(!t||!t.tagName)return!1;let n=t.tagName.toLowerCase();if(t.id&&"BODY"!==t.tagName&&(n+="#"+t.id),t.classList.length&&"BODY"!==t.tagName&&t.classList.forEach((t=>{-1===t.indexOf(":")&&(n+="."+t)})),"BODY"!==t.tagName&&t.parentNode){let e=Array.prototype.indexOf.call(t.parentNode.children,t);n+=`:nth-child(${e+1})`}e.unshift(n),t=t.parentNode}while("HTML"!==t.tagName);return e.join(" > ")}function u(){let t=window;for(;t!==window.parent;)t=window.parent;return t}function d(t,e){let n;return l((t=>{t.document.contains(e)&&(n=t.frameElement)})),n}function f(t){let e=u;return t.forEach((t=>{e&&(e=e.querySelector(t))})),e}function*m(t,e){for(let n of t)n.selector&&e.matches(n.selector)&&(yield n)}function h(t,e,n,r){for(let o of m(r||window.elementConfig,t)){if(!0===o[e])return n(t,o);if(!1===o[e])return!1;if(void 0===o[e])continue;if(b(o[e]))return n(t,o,!0)}return!1}function p(t=10){for(var e="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",r=n.length,o=0;o<t;o++)e+=n.charAt(Math.floor(Math.random()*r));return e+=(new Date).toTimeString().replace(/[\W_]+/g,"").substr(0,6)}function g(t){let e=(new DOMParser).parseFromString(t,"text/html");return e.head.children[0]?e.head.children[0]:e.body.children[0]}function y(t,e){return t.split(e).map((t=>t.trim()))}function _(t,e){return t.map((t=>t.trim())).join(e)}function b(t){try{document.createDocumentFragment().querySelector(t)}catch(t){return!1}return!0}function x(t,e){let n=[],r=(window,d(0,t)),o=s(r);return o&&n.unshift(o),e?{path:n,document:r||document}:n}n.r(e),n.d(e,{generateUUID:()=>r,getParentFromElement:()=>o,isJsonString:()=>i,getAttributes:()=>a,checkValue:()=>c,allFrame:()=>l,cssPath:()=>s,getTopMostWindow:()=>u,findIframeFromElement:()=>d,getIframeFromPath:()=>f,configMatch:()=>m,configExecuter:()=>h,UUID:()=>p,parseTextToHtml:()=>g,splitBydelimiter:()=>y,joinBydelimiter:()=>_,isValidSelector:()=>b,getElementPath:()=>x,default:()=>v});const v={getElementPath:x,isValidSelector:b,joinBydelimiter:_,splitBydelimiter:y,parseTextToHtml:g,UUID:p,configExecuter:h,configMatch:m,getIframeFromPath:f,findIframeFromElement:d,getTopMostWindow:u,cssPath:s,allFrame:l,checkValue:c,getAttributes:a,isJsonString:i,getParentFromElement:o,generateUUID:r}},50720:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;o(n(42336));var r=o(n(48032));function o(t){return t&&t.__esModule?t:{default:t}}const i={items:[],ioInstance:null,moduleAttribues:[],module_items:[],__init:function(){this.__initIntesection(),this.__initSocket(),this.__initEvents()},__initIntesection:function(){const t=this;this.ioInstance=new IntersectionObserver(((e,n)=>{e.forEach((e=>{if(e.isIntersecting){const n=t.__getMainAttribue(e.target);n.id&&document.dispatchEvent(new CustomEvent("CoCreateFilter-loadMore",{detail:{attrName:n.name,attrId:n.id}})),t.ioInstance.unobserve(e.target)}}))}),{threshold:1})},__runLoadMore:function(t,e){if(!e||!t)return;let n=this.items.find((n=>n.attrName===t&&n.id===e));n&&n.count>0&&this.fetchData(n)},__getMainAttribue:function(t){const e=this.moduleAttribues.find((e=>""!==(t.getAttribute(e)||"")));return e?{name:e,id:t.getAttribute(e)}:{}},__initSocket:function(){const t=this;r.default.listen("readDocumentList",(function(e){let n=e.element,r=t.items.find((t=>t.id===n));if(r){const n=e.data;let o=document.querySelector(`[${r.attrName}="${r.id}"][data-fetch_type="scroll"]`);n.length>0&&o&&t.ioInstance.observe(o);const i=e.operator.total,a=document.querySelectorAll(`[${r.attrName}="${r.id}"][data-fetch_type="total"]`);a&&a.forEach((t=>t.innerHTML=i))}}))},__initEvents:function(){const t=this;document.addEventListener("CoCreateFilter-loadMore",(function(e){const n=e.detail.attrId,r=e.detail.attrName;t.__runLoadMore(r,n)})),document.querySelectorAll('[data-fetch_type="loadmore"]').forEach((e=>{e.addEventListener("click",(function(n){n.preventDefault();const r=t.__getMainAttribue(e);r.id&&t.__runLoadMore(r.attrName,r.attrId)}))}))},setFilter:function(t,e,n){if(!e)return;let r=t.getAttribute(e);if(!r)return;this.moduleAttribues.includes(e)||this.moduleAttribues.push(e);let o=t.getAttribute("data-fetch_collection"),i="collection"==t.getAttribute("data-fetch_value_type"),a=t.getAttribute("data-order_by"),c=t.getAttribute("data-order_type")||"asc",l=parseInt(t.getAttribute("data-fetch_count")),s={el:t,id:r,eId:r,type:n,attrName:e,collection:o,startIndex:0,options:{},fetch:{},is_collection:i,search:{type:"or",value:[]},orders:[],filters:[]};return!isNaN(l)&&l>0&&(s.count=l),a&&s.orders.push({name:a,type:"asc"==c?1:-1}),this._initFilter(s,r,e),this._initOrder(s,r,e),this.items.push(s),this._initInputForm(s,e),this._initExportImport(s,r,e),s},_initFilter:function(t,e,n){let r=t.el.getRootNode().querySelectorAll("["+n+'="'+e+'"]');for(var o=0;o<r.length;o++){let i=r[o],a=i.getAttribute("data-filter_name"),c=i.getAttribute("data-filter_operator")?i.getAttribute("data-filter_operator"):"$contain",l=i.getAttribute("data-filter_value_type")?i.getAttribute("data-filter_value_type"):"string",s=i.getAttribute("data-filter_type"),u=i.getAttribute("data-filter_value");if(null!=u)if("raw"!==l&&(u=u.replace(/\s/g,"").split(",")),a){let e=this.getFilterByName(t,a,c);if("string"!=l)for(let t=0;t<u.length;t++)u[t]=Number(u[t]);this.insertArrayObject(t.filters,e,{name:a,value:u,operator:c,type:s})}else t.search.value=this._makeSearchOption(e,n)}},_initOrder:function(t,e,n){let r=t.el.getRootNode().querySelectorAll("["+n+'="'+e+'"]');const o=this;for(var i=0;i<r.length;i++){let e=r[i],n=e.getAttribute("data-order_by"),a=e.getAttribute("value");n&&a&&(["A","BUTTON"].includes(e.tagName)?e.addEventListener("click",(function(){let e=this.getAttribute("data-order_by"),n=this.getAttribute("value");o._applyOrder(t,e,n),t.el&&t.el.dispatchEvent(new CustomEvent("changeFilterInput",{detail:{type:"order"}}))})):this._applyOrder(t,n,a))}this._initToggleOrderEvent(t,e,n)},_initToggleOrderEvent:function(t,e,n){let r=document.querySelectorAll(`[${n}="${e}"][data-toggle_order]`);const o=this;r.forEach((e=>{e.addEventListener("click",(function(){let n=this.getAttribute("data-toggle_order")||"",i=this.getAttribute("data-order_by");n="asc"===n?"desc":"asc";for(let t=0;t<r.length;t++)r[t]!==e&&r[t].setAttribute("data-toggle_order","");t.orders=[],o._applyOrder(t,i,n),e.setAttribute("data-toggle_order",n),t.el&&t.el.dispatchEvent(new CustomEvent("changeFilterInput",{detail:{type:"order"}}))}))}))},_initExportImport:function(t,e,n){let o=document.querySelector(`[data-export_type][${n}="${e}"]`),i=document.querySelector(`[data-import="true"][${n}="${e}"]`);const a=this;o&&o.addEventListener("click",(function(){if(!t)return;let e=a.makeFetchOptions(t);e.export={collection:e.collection,type:o.getAttribute("data-export_type")||"json"},r.default.readDocumentList(e)})),i&&i.addEventListener("click",(function(){var e=document.createElement("input");if(e.type="file",!t)return;let n=t.collection;e.onchange=t=>{var e=t.target.files[0];r.default.importCollection({collection:n,file:e})},e.click()}))},_applyOrder:function(t,e,n){if(!n)return;let r=0,o=this.getOrderByName(t,e);r="asc"==n?1:"desc"==n?-1:[],this.insertArrayObject(t.orders,o,{name:e,type:r},r)},changeCollection:function(t){let e=t.el.getAttribute("data-fetch_collection");t.collection=e,t.startIndex=0},_makeSearchOption:function(t,e){let n=document.querySelectorAll("form["+e+"="+t+"]"),r="["+e+"="+t+"]",o=document.querySelectorAll("input"+r+",textarea"+r+", select"+r),i=[];for(let t=0;t<n.length;t++){let e=n[t].querySelectorAll("input, textarea, select");e=Array.prototype.slice.call(e),i=i.concat(e)}o=Array.prototype.slice.call(o),i=i.concat(o);let a=[];for(var c=0;c<i.length;c++){let t=i[c].getAttribute("data-filter_name"),e=i[c].getAttribute("data-order_by"),n=i[c],r=n.getAttribute("data-value_type")?n.getAttribute("data-value_type"):"string",o=null;t||e||("checkbox"!=n.type||n.checked?(o=n.value,"string"!=r&&(o=Number(o)),o&&!a.includes(o)&&a.push(o)):o=null)}return a},_initInputForm:function(t,e){if(!t)return;let n="["+e+'="'+t.id+'"]',r=t.el.getRootNode().querySelectorAll("form"+n+" input, form"+n+" textarea, form"+n+" select"),o=t.el.getRootNode().querySelectorAll("input"+n+",textarea"+n+", select"+n);this.setCheckboxName(t.id,e),r=Array.prototype.slice.call(r),o=Array.prototype.slice.call(o),r=r.concat(o);for(let e=0;e<r.length;e++){let n=r[e];n.getAttribute("data-order_by")?this._initOrderInput(t,n):this._initFilterInput(t,n,t.id)}},_initOrderInput:function(t,e){var n=this;e.addEventListener("change",(function(e){e.preventDefault();let r=this.getAttribute("data-order_by"),o=0,i=n.getOrderByName(t,r);o="asc"==this.value?1:"desc"==this.value?-1:[],n.insertArrayObject(t.orders,i,{name:r,type:o},o),t.el&&t.el.dispatchEvent(new CustomEvent("changeFilterInput",{detail:{type:"order"}}))}))},_initFilterInput:function(t,e,n){var r,o=this;e.addEventListener("input",(function(i){i.preventDefault();let a=this.getAttribute("data-filter_name"),c=this.getAttribute("data-filter_operator")||"$contain",l=this.getAttribute("data-filter_type"),s=this.getAttribute("data-filter_value_type")||"string";clearTimeout(r),r=setTimeout((function(){if(a){let n=o.getFilterByName(t,a,c),d=e.type,f=[];if("checkbox"==d)for(var r=document.querySelectorAll("input[name="+e.name+"]:checked"),i=0;i<r.length;i++)f.push(r[i].value);else if("raido"==d);else if("range"==d)f=[Number(e.min),Number(e.value)];else{var u=e.value;"string"!=s&&(u=Number(u)),"none"!=u&&(f=[u]),"raw"===s&&(f=u)}o.insertArrayObject(t.filters,n,{name:a,value:f,operator:c,type:l})}else t.search.value=o._makeSearchOption(n,t.attrName);t.el&&t.el.dispatchEvent(new CustomEvent("changeFilterInput",{detail:{type:"filter"}}))}),500)}))},setCheckboxName:function(t,e){for(var n=document.querySelectorAll("form["+e+'="'+t+'"]'),r=0;r<n.length;r++)for(var o=n[r].querySelectorAll("input[type=checkbox], form input[type=radio]"),i=0;i<o.length;i++){var a=o[i].getAttribute("name"),c=o[i].getAttribute("data-filter_name");!a&&c&&o[i].setAttribute("name","_"+t+"-"+c+"_"+r)}},getFilterByName:function(t,e,n){for(var r=0;r<t.filters.length;r++){var o=t.filters[r];if(o.name==e&&o.operator==n)return r}return-1},insertArrayObject:function(t,e,n,r){return r||(r=n.value),"object"==typeof r&&0==r.length?-1!=e&&t.splice(e,1):-1!=e?t[e]=n:t.push(n),t},getOrderByName:function(t,e){for(var n=0;n<t.orders.length;n++)if(t.orders[n].name==e)return n;return-1},defineEvent:function(t){t.el.addEventListener("fetchFilterData",(function(t){}))},fetchData:function(t){let e=this.makeFetchOptions(t);r.default.readDocumentList(e)},getObjectByFilterId:function(t,e){for(var n=0;n<t.length;n++){let r=t[n].filter;if(r&&r.id==e)return t[n]}},getObjectByElement:function(t,e){for(var n=0;n<t.length;n++){let r=t[n].filter;if(r&&r.el.isSameNode(e))return t[n]}},makeFetchOptions:function(t){let e={collection:t.collection,element:t.eId,metadata:{isRefresh:t.isRefresh},operator:{filters:t.filters,orders:t.orders,search:t.search,startIndex:t.startIndex},is_collection:t.is_collection};return t.count&&(e.operator.count=t.count),e},init:function({name:t,attribute:e,callback:n}){let o=document.querySelectorAll(`[data-fetch_collection][${e}]`);const i=this;o.forEach((n=>{i.__initFilterElement(n,e,t)})),r.default.listen("readDocumentList",(function(t){n.call(null,t)}))},__initFilterElement:function(t,e,n){let r=t.getAttribute(e);const o=this;if(!r)return;let i=this.setFilter(t,e,n);i&&(this.module_items.push({el:t,filter:i,id:r,name:n}),t.addEventListener("changeFilterInput",(function(t){o.fetchData(i)})),this.fetchData(i))}};i.__init();var a=i;e.default=a}}]);