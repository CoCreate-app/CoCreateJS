(this.webpackChunkCoCreate=this.webpackChunkCoCreate||[]).push([[813],{4808:(e,t,n)=>{"use strict";n.r(t);var o=n(8585),i=n.n(o),a=n(6515),r=n(1737);let c=new(i())("api");const s={modules:{},init:function({name:e,module:t}){this.register(e,t)},register:function(e,t){const n=this;void 0===this.modules[e]&&(this.modules[e]=t,c.listen(e,(t=>{n.__responseProcess(e,t)})),Array.isArray(t.actions)&&t.actions.forEach((e=>{"function"!=typeof t[`action_${e}`]&&(t[`action_${e}`]=function(o){n.__commonAction(t.id,e,o)}),a.default.init({action:e,endEvent:e,callback:n=>{t[`action_${e}`](n)}})})))},__responseProcess:function(e,t){const{type:n,response:o}=t,i=this.modules[e];n&&o&&i&&("function"==typeof i[`render_${n}`]&&i[`render_${n}`](o),this.render(n,o),document.dispatchEvent(new CustomEvent(n,{detail:{data:o}})))},__commonAction:function(e,t,n){const o=n.closest("form")||document;let i=s.getFormData(e,t,o);s.send(e,t,i)},getFormData:function(e,t,n){const o=`data-${e}`,i=this,a=n.querySelectorAll(`[${o}^="${t}."]`);let r={};a.forEach((n=>{let a=n.getAttribute(o),c=n.getAttribute(o+"_array"),s=i.__getElValue(n);if(a){if(t){let e=new RegExp(`^${t}.`,"i");if(!e.test(a))return;a=a.replace(e,"")}c?(r[a]||(r[a]=[]),r[a].push(i.getFormData(e,c,n))):null!=s&&(r[a]=s)}}));let c=Object.keys(r),s={};return c.forEach((e=>{if(e.split(".").length>1){let t=i.__createObject(r[e],e);delete r[e],s=i.__mergeObject(s,t)}else s[e]=r[e]})),s},__getElValue:function(e){let t=null;if(void 0!==e.value)switch(e.type.toLocaleLowerCase()){case"checkbox":e.checked&&(t=e.value);break;default:t=e.value}else t=e.getAttribute("value"),t||(t=e.innerHTML);return t},__mergeObject:function(e,t){e=e||{};for(let n of Object.keys(t))t[n]instanceof Object&&Object.assign(t[n],this.__mergeObject(e[n],t[n]));return Object.assign(e||{},t),e},__createObject:function(e,t){if(!t)return e;let n=t.split("."),o=e;for(var i=n.length-1;i>=0;i--)o={[n[i]]:o};return o},send:function(e,t,n){let o=this.getCommonParamsExtend(n||{});o={...o,data:n},c.send(e,{type:t,data:o})},render:function(e,t){r.default.data({selector:`[data-template_id="${e}"]`,data:t})},createApiSocket:function(e,t){t?(c.create({namespace:t,room:null,host:e}),c.setGlobalScope(t)):c.create({namespace:null,room:null,host:e})},getCommonParamsExtend:function(e){return{apiKey:e.apiKey||config.apiKey,securityKey:e.securityKey||config.securityKey,organization_id:e.organization_id||config.organization_Id}}};s.createApiSocket(window.config.host?window.config.host:"server.cocreate.app",window.config.organization_Id);const l=s,u={id:"key",actions:["renderKey"],action_renderKey:function(e){const t=e.closest("form")||document;let n=l.getFormData(this.id,"renderKey",t);l.render("renderKey",{data:n})}};l.init({name:u.id,module:u})}}]);