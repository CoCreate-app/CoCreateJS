(this.webpackChunkCoCreate=this.webpackChunkCoCreate||[]).push([[7220],{5021:function(e,t){var o;"undefined"!=typeof self&&self,void 0===(o=function(){return function(e){function t(){let t={};return e&&e.config&&(t=e.config),{apiKey:t.apiKey,organization_id:t.organization_Id}}function o(t){let o={};return e&&e.config&&(o=e.config),{apiKey:t.apiKey||o.apiKey,organization_id:t.organization_id||o.organization_Id}}function n(t,o){let n={};e&&e.config&&(n=e.config);let s=t||n.organization_Id,i=o||"";return i?`${s}/${i}`:s}function s(e=36){let t=(new Date).getTime(),o=0,n="uxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx";if(e<=n.length)n=n.substr(0,e);else{let t=e-n.length,o="-xxxyyxxx",s=Math.floor(t/o.length);for(let e=0;e<s;e++)n+=o;s=t-s*o.length,n+=o.substr(0,s)}return n.replace(/[xy]/g,(function(e){var n=16*Math.random();return t>0?(n=(t+n)%16|0,t=Math.floor(t/16)):(n=(o+n)%16|0,o=Math.floor(o/16)),("x"==e?n:7&n|8).toString(16)}))}return{getCommonParams:t,getCommonParamsExtend:o,generateSocketClient:n,GenerateUUID:s}}(window)}.apply(t,[]))||(e.exports=o)},6836:function(e,t,o){var n,s;"undefined"!=typeof self&&self,n=[o(5021)],void 0===(s=function(e){return function(e,t,o,n){class s{constructor(e="crud"){this.prefix=e||"crud",this.sockets=new Map,this.listeners=new Map,this.messageQueue=new Map,this.saveFileName="",this.globalScope=""}setGlobalScope(e){this.globalScope=`${this.prefix}/${e}`}getGlobalScope(){return this.globalScope}create(e){const{namespace:s,room:i}=e,c=this.getKey(s,i);let r,a=this;if(s&&this.setGlobalScope(s),this.sockets.get(c))return void(r=this.sockets.get(c));let l=t.location.protocol;"about:"===t.location.protocol&&(l=t.parent.location.protocol,e.host||(e.host=t.parent.location.host));let u="http:"===l?"ws":"wss";const d=e.port?e.port:8088;let h=`${u}://${t.location.host}:${d}/${c}`;e.host&&(h=e.host.includes("://")?`${e.host}/${c}`:e.host.includes(":")?`${u}://${e.host}/${c}`:`${u}://${e.host}:${d}/${c}`);try{r=new o(h)}catch(e){return}r.onopen=function(e){(a.messageQueue.get(c)||[]).forEach((e=>r.send(JSON.stringify(e)))),a.sockets.set(c,r),a.messageQueue.set(c,[])},r.onclose=function(t){switch(t.code){case 1e3:break;default:a.destroy(r,c),a.reconnect(r,e)}},r.onerror=function(t){a.destroy(r,c),a.reconnect(r,e)},r.onmessage=function(e){try{if(t.Blob&&e.data instanceof n)return void a.saveFile(e.data);let s=JSON.parse(e.data);if(s.data.event){if(t.CustomEvent){var o=new t.CustomEvent(s.data.event,{detail:s.data});return void t.document.dispatchEvent(o)}return void process.emit(s.data.event,s.data)}s.action;const i=a.listeners.get(s.action);if(!i)return;i.forEach((e=>{e(s.data,c)}))}catch(e){}}}send(t,o,n){const s={action:t,data:{...o,uid:e.GenerateUUID()}},i=this.getKeyByRoom(n),c=this.getByRoom(n);c?c.send(JSON.stringify(s)):this.messageQueue.get(i)?this.messageQueue.get(i).push(s):this.messageQueue.set(i,[s])}sendFile(e,t){const o=this.getByRoom(t);o&&o.send(e)}listen(e,t){this.listeners.get(e)?this.listeners.get(e).push(t):this.listeners.set(e,[t])}reconnect(e,t){let o=this;setTimeout((function(){o.create(t)}),1e3)}destroy(e,t){e&&(e.onerror=e.onopen=e.onclose=null,e.close(),e=null),this.sockets.get(t)&&this.sockets.delete(t)}destroyByKey(e){let t=this.sockets.get(e);t&&this.destroy(t,e)}getKey(e,t){let o=`${this.prefix}`;return e&&""!=e&&(o+=t&&""!=t?`/${e}/${t}`:`/${e}`),o}getByRoom(e){let t=this.getKeyByRoom(e);return this.sockets.get(t)}getKeyByRoom(e){let t=this.globalScope;return e&&(t=`${this.prefix}/${e}`),t}saveFile(e){if(t.document){const n=this.saveFileName||"downloadFile";var o=t.document.createElement("a");t.document.body.appendChild(o),o.style="display: none";let s=window.URL.createObjectURL(e);o.href=s,o.download=n,o.click(),t.URL.revokeObjectURL(s),this.saveFileName=""}}listenAsync(e){return new Promise(((o,n)=>{t.document?t.document.addEventListener(e,(function(e){o(e.detail)}),{once:!0}):process.once(e,(e=>{o(e)}))}))}}return s}(e,window,WebSocket,Blob)}.apply(t,n))||(e.exports=s)},980:function(e,t,o){var n,s;"undefined"!=typeof self&&self,n=[o(6836),o(1129)],void 0===(s=function(e,t){return function(e,t,o){if(e){let e=new t("ws");o.setSocket(e),o.createSocket(window.config.host?window.config.host:window.location.hostname,window.config.organization_Id)}return o}(!0,e,t)}.apply(t,n))||(e.exports=s)},1129:function(e,t,o){var n,s;"undefined"!=typeof self&&self,n=[o(5021)],void 0===(s=function(e){return function(e,t){return{socket:null,setSocket:function(e){this.socket=e},send:function(e){let o=t.getCommonParams();if(!e||!e.emit)return;o={...o,...e};const n=t.generateSocketClient(e.namespace,e.room);this.socket.send("sendMessage",o,n)},receive:function(e,t){this.socket.listen(e,t)},createSocket:function(e,t){this.socket&&(t?(this.socket.create({namespace:t,room:null,host:e}),this.socket.setGlobalScope(t)):this.socket.create({namespace:null,room:null,host:e}))},listen:function(e,t){this.socket.listen(e,t)},listenAsync:function(e){return this.socket.listenAsync(e)}}}(window,e)}.apply(t,n))||(e.exports=s)}}]);