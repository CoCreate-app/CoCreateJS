(this.webpackChunkCoCreate=this.webpackChunkCoCreate||[]).push([[246],{2671:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>r});n(366);function a({realDom:e,virtualDom:t,ignore:n}){this.render=function(e,t=0,a){for(let r of e){if(r.matches(n))continue;let e=this.createVirtualElement({element:r});a.append(e),r.children.length&&this.render(r.children,t+1,e)}},this.renderNew=function(e,t=0,a){let r;for(let i of e)i.matches(n)||(r=this.createVirtualElement({element:i}),i.children.length&&this.renderNew(i.children,t+1,r),a&&a.append(r));return r},this.createVirtualElement=function({options:e,element:t}){let n=document.createElement("div"),a=t.getAttribute("data-name"),r=a||t.tagName,i=t.children.length;n.classList.add("vdom-item"),t.children.length&&n.classList.add("parent");let l=document.createElement("div");l.setAttribute("data-exclude","true");let d=t.getAttribute("data-element_id");n.setAttribute("data-element_id",d),n.setAttribute("data-draggable","true"),n.setAttribute("data-droppable","true");let s,c=document.createElement("span");c.classList.add("element-name"),c.innerHTML=r;let o=this.createFAIcon({name:"fa-eye",event:{click:e=>{"none"==t.style.display?(t.style.display=s,n.classList.remove("layer-hidden")):(s=t.style.display,t.style.display="none",n.classList.add("layer-hidden"))}}}),m=this.createFAIcon({name:"fa-arrows-alt"});if(l.append(o),i){let e=this.createFAIcon({name:"fa-caret-down"}),t=document.createElement("span");t.insertAdjacentElement("afterbegin",e),t.classList.add("icon-container"),l.append(t),e.setAttribute("data-toggle","collapse"),e.setAttribute("data-toggle_closest",".vdom-item"),e.setAttribute("data-transform_to","fa fa-caret-right")}return l.append(c),l.append(m),n.append(l),n},this.createFAIcon=function({name:e,event:t}){let n=document.createElement("i");if(n.classList.add("fa"),n.classList.add(e),t){let e=Object.keys(t)[0],a=t[e];n.addEventListener(e,a)}return n},this.render([e],0,t)}const r={initVdom:function({realdom:e,virtualDom:t,ignore:n}){let r=new a({realDom:e,virtualDom:t,ignore:n}),i="IFRAME"===e.tagName?e.contentWindow:e.ownerDocument.defaultView;return function(e,t){"complete"===e.document.readyState?t():e.addEventListener("load",(()=>{}))}(i,(()=>{i.CoCreate.observer.init({name:"vdom",exclude:".vdom-item",observe:["childList","subtree"],callback:e=>{let n=e.target;if(e.isRemoved&&n.tagName){let e=n.getAttribute("data-element_id");if(e){let n=t.querySelector(`[data-element_id="${e}"]`);n&&n.remove()}}else{let e=n.getAttribute("data-element_id"),a=r.renderNew([n]);if(!a)return;let i=t.querySelector(`[data-element_id="${e}"]`);if(i&&i.replaceWith(a),n.previousElementSibling){let e=n.previousElementSibling.getAttribute("data-element_id");if(!e)return;let r=t.querySelector(`[data-element_id="${e}"]`);r&&r.insertAdjacentElement("afterend",a)}else if(n.parentElement){let e=n.parentElement.getAttribute("data-element_id");if(!e)return;let r=t.querySelector(`[data-element_id="${e}"]`);r&&r.insertAdjacentElement("afterbegin",a)}}}})})),r}}}}]);