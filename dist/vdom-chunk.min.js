(this.webpackChunkCoCreate=this.webpackChunkCoCreate||[]).push([[246],{2671:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>r});a(366);function n({realDom:e,virtualDom:t,ignore:a}){this.render=function(e,t=0,n){for(let r of e){if(r.matches(a))continue;let e=this.createVirtualElement({element:r});n.append(e),r.children.length&&this.render(r.children,t+1,e)}},this.renderNew=function(e,t=0,n){let r;for(let i of e)i.matches(a)||(r=this.createVirtualElement({element:i}),i.children.length&&this.renderNew(i.children,t+1,r),n&&n.append(r));return r},this.createVirtualElement=function({options:e,element:t}){let a=document.createElement("div"),n=t.getAttribute("data-name"),r=n||t.tagName,i=t.children.length;a.classList.add("vdom-item"),t.children.length&&a.classList.add("parent");let l=document.createElement("div");l.setAttribute("data-exclude","true");let d=t.getAttribute("data-element_id");a.setAttribute("data-element_id",d),a.setAttribute("data-draggable","true"),a.setAttribute("data-droppable","true");let s,o=document.createElement("span");o.classList.add("element-name"),o.innerHTML=r;let c=this.createFAIcon({name:"fa-eye",event:{click:e=>{"none"==t.style.display?(t.style.display=s,a.classList.remove("layer-hidden")):(s=t.style.display,t.style.display="none",a.classList.add("layer-hidden"))}}}),m=this.createFAIcon({name:"fa-arrows-alt"});if(l.append(c),i){let e=this.createFAIcon({name:"fa-caret-down"}),t=document.createElement("span");t.insertAdjacentElement("afterbegin",e),t.classList.add("icon-container"),l.append(t),e.setAttribute("data-toggle","collapse"),e.setAttribute("data-toggle_closest",".vdom-item"),e.setAttribute("data-transform_to","fa fa-caret-right")}return l.append(o),l.append(m),a.append(l),a},this.createFAIcon=function({name:e,event:t}){let a=document.createElement("i");if(a.classList.add("fa"),a.classList.add(e),t){let e=Object.keys(t)[0],n=t[e];a.addEventListener(e,n)}return a},this.render([e],0,t)}const r={initVdom:function({realdom:e,virtualDom:t,ignore:a}){let r=new n({realDom:e,virtualDom:t,ignore:a}),i="IFRAME"===e.tagName?e.contentWindow:e.ownerDocument.defaultView;return function(e,t){"complete"===e.document.readyState?t():e.addEventListener("load",(()=>{}))}(i,(()=>{i.CoCreate.observer.init({name:"vdom",observe:["addedNodes"],callback:e=>{if(!e.target.tagName)return;let a=e.target;if(!a.tagName||a.classList.contains("vdom-item"))return;let n=a.getAttribute("data-element_id");if(n){let e=t.querySelector(`[data-element_id="${n}"]`);e&&e.remove()}}})})),i.CoCreate.observer.init({name:"vdom",observe:["removedNodes"],callback:e=>{let a=e.target;if(a.classList.contains("vdom-item"))return;let n=a.getAttribute("data-element_id"),i=r.renderNew([a]);if(!i)return;let l=t.querySelector(`[data-element_id="${n}"]`);if(l&&l.replaceWith(i),a.previousElementSibling){let e=a.previousElementSibling.getAttribute("data-element_id");if(!e)return;let n=t.querySelector(`[data-element_id="${e}"]`);n&&n.insertAdjacentElement("afterend",i)}else if(a.parentElement){let e=a.parentElement.getAttribute("data-element_id");if(!e)return;let n=t.querySelector(`[data-element_id="${e}"]`);n&&n.insertAdjacentElement("afterbegin",i)}}}),r}}}}]);