(this.webpackChunkCoCreate=this.webpackChunkCoCreate||[]).push([[3560],{5949:(t,e,i)=>{"use strict";i.r(e),i.d(e,{default:()=>Q,initContainer:()=>J,initElement:()=>U,initFunction:()=>Y,initIframe:()=>X});var n=i(366);function r(t){t.querySelectorAll(".sortable").forEach((t=>{J({target:t})})),t.querySelectorAll(".cloneable").forEach((t=>{J({target:t,cloneable:!0})}))}i(4247);const o="data-droppable",s="data-exclude",a="data-draggable",l="data-cloneable",d="data-handle",c="data-group_name";let u=[];let h,p=window;for(;p!==window.parent;)p=window.parent;function f(t,e){return t.tagName||(t=t.parentElement),h.getContext(t,e)}function m(t,e){return t.tagName||(t=t.parentElement),h.getContexts(t,e)}function g(t){for(t.tagName||(t=t.parentElement);;){let e=t.getAttribute(c);if(e)return[t,e];if(!(t=t.parentElement))return[null,void 0]}}p.dndContext?h=p.dndContext:(h=new function(t){this.map=new Map,this.checkInitFunction=function(t,e){for(let i of u)if(i.target.contains(t)){let n=i.onDnd(t,e);if(Array.isArray(n))return n}},this.getContext=function(t,e){do{if("true"==t.getAnyAttribute(e))return t;if(this.checkInitFunction(t,[e]))return t;t=t.parentElement}while(t)},this.getContexts=function(t,e){do{for(let i of e){if("true"==t.getAnyAttribute(i))return[t,i];{let i=this.checkInitFunction(t,e);if(Array.isArray(i)&&e.includes(i[1]))return i}}t=t.parentElement}while(t)},this.setContext=function(t,e,i){t.setHiddenAttribute(e,i)}},p.dndContext=h);function b(t,e,i){this.effectCb,e.removeAttribute("CoC-dragging"),this.start=()=>{this.cloneEl=e.cloneNode(!0);let{width:t,height:n}=i.window.getComputedStyle(e);window.getComputedStyle(this.cloneEl);this.wrapper=document.createElement("div"),this.wrapper.style.height=n,this.wrapper.style.width=t,this.wrapper.append(this.cloneEl),this.wrapper.style.display="none",i.document.body.append(this.wrapper),this.wrapper.style.pointerEvents="none",this.wrapper.id="ghostEffect"},this.draw=(e,i)=>{this.wrapper.style.display="block";this.wrapper.getBoundingClientRect();let n,{marginTop:r,marginBottom:o,marginLeft:s,marginRight:a,width:l,height:d}=function(t,e){let i=window.getComputedStyle(t),n={};return e.forEach((t=>{n[t]=parseInt(i[t])})),n}(this.cloneEl,["marginTop","marginBottom","marginLeft","marginRight","width","height"]);n=i.frame?i.frame.getBoundingClientRect():{top:0,left:0},this.wrapper.style.top=n.top+e.y-t.offsetY+"px",this.wrapper.style.left=n.left+e.x-t.offsetX+"px"},this.hide=()=>{this.wrapper.remove()}}function w(t,e,i,n,r,o){var s,a,l=r-i,d=o-n,c=l*l+d*d,u=-1;0!=c&&(u=((t-i)*l+(e-n)*d)/c),u<0?(s=i,a=n):u>1?(s=r,a=o):(s=i+u*l,a=n+u*d);var h=t-s,p=e-a;return Math.sqrt(h*h+p*p)}function y(t,e){let i,n,r=1/0;for(let o of e){if(o.classList.contains("hidden"))continue;let[e,s]=A(t,o);s<r&&(r=s,i=o,n=e)}return[n,i]}let E=["left","top","right","bottom"];function A(t,e){let i,n=e.getBoundingClientRect(),r={p1:[n.top,n.left],p2:[n.bottom,n.left]},o={p1:[n.top,n.left],p2:[n.top,n.right]},s={p1:[n.top,n.right],p2:[n.bottom,n.right]},a={p1:[n.bottom,n.left],p2:[n.bottom,n.right]},l=[w(t[0],t[1],r.p1[1],r.p1[0],r.p2[1],r.p2[0]),w(t[0],t[1],o.p1[1],o.p1[0],o.p2[1],o.p2[0]),w(t[0],t[1],s.p1[1],s.p1[0],s.p2[1],s.p2[0]),w(t[0],t[1],a.p1[1],a.p1[0],a.p2[1],a.p2[0])],d=1/0;return l.forEach(((t,e)=>{t<d&&(d=t,i=E[e])})),[i,d]}function v(){this.listener={},this.on=function(t,e){Object.hasOwnProperty(t)||(this.listener[t]=[]),this.listener[t].push(e)},this.dispatch=function(t,e){this.listener.hasOwnProperty(t)&&this.listener[t].forEach((t=>t(e)))}}var C=i(4727);let S=["left","top"];i(5959);let x=new function(t){this.state=t,this.removeAttribute=(t,e)=>{this.state.has(t)&&delete this.state.get(t).attributes[e]},this.hasAttribute=(t,e)=>{if(this.state.has(t))return!!this.state.get(t).attributes[e]},this.getAttribute=(t,e)=>{if(this.state.has(t))return this.state.get(t).attributes[e]},this.setAttribute=(t,e,i)=>{this.state.has(t)?this.state.get(t).attributes[e]=i:this.state.set(t,{element:t,attributes:{[e]:i}})},this.getAllAttributes=t=>{if(this.state.has(t))return this.state.get(t).attributes},this.getDataset=t=>{let e={};for(let[i,n]of Object.entries(this.state.get(t).attributes))i.beginsWith("data-")&&(e[i.substr(5)]=n);return e}}(new Map);function M(t,e=x){let i=t.Element.prototype;if(i.setHiddenAttribute)return;let n=i.setAttribute;i.setAttribute=function(t,e){n.apply(this,[t,e])},i.setHiddenAttribute=function(t,i){e.setAttribute(this,t,i)},i.getHiddenAttribute=function(t){return e.getAttribute(this,t)},i.getAllHiddenAttribute=function(t){return e.getAllAttributes(this)},i.getAnyAttribute=function(t){return this.hasAttribute(t)?this.getAttribute(t):e.hasAttribute(this,t)?e.getAttribute(this,t):void 0},i.setAnyAttribute=function(t,i){this.setAttribute(t,i),e.setAttribute(this,t,i)},i.removeAnyAttribute=function(t){this.removeAnyAttribute(t),e.removeAttribute(this,t)},i.hasAnyAttribute=function(t,i){return this.hasAttribute(t)||e.hasAttribute(this,t)},i.hideAttribute=function(t){if(this.hasAttribute(t)){if(e.hasAttribute(this,t))return!1;e.setAttribute(this,t,this.getAttribute(t)),this.removeAttribute(t)}},i.unhideAttribute=function(t){if(e.hasAttribute(this,t)){if(this.hasAttribute(t))return!1;this.setAttribute(t,e.getAttribute(this,t)),e.removeAttribute(this,t)}}}window.domContext=x,function(){let t=Array.from(window.frames);t.unshift(window);for(let e of t)M(e.window)}();const k={register:M,domContext:x};let D,H,L,B,O;window.addEventListener("DOMContentLoaded",(t=>{k.register(window)}));let T,I,R={scroller:new function({speed:t,threshold:e}){this.lastScrollingElement,this.onElement,this.mouse,this.speed,this.interval,this.isActive,this.update=function(t,e){this.mouse={x:t,y:e}},this.calculateScroll=function({x:i,y:n,element:r,onMouseScrollMove:o}){for(;!(r&&r.tagName&&(r.scrollHeight>r.clientHeight||r.scrollWidth>r.clientWidth))&&r.parentElement;)r=r.parentElement;let s=r.scrollWidth>r.clientWidth,a=r.scrollHeight>r.clientHeight,l=r.clientWidth/e,d=r.clientHeight/e,[c,u]=[];if(a?[c,u]=function(t,e){let i,n=e.getBoundingClientRect(),r={p1:[0,n.left],p2:[0,n.right]},o={p1:[e.clientHeight,n.left],p2:[e.clientHeight,n.right]},s=[w(t[0],t[1],r.p1[1],r.p1[0],r.p2[1],r.p2[0]),w(t[0],t[1],o.p1[1],o.p1[0],o.p2[1],o.p2[0])],a=1/0;return s.forEach(((t,e)=>{t<a&&(a=t,i=["top","bottom"][e])})),[i,a]}([i,n],r):s&&([c,u]=function(t,e){let i,n=e.getBoundingClientRect(),r={p1:[n.top,0],p2:[n.bottom,0]},o={p1:[n.top,e.clientWidth],p2:[n.bottom,e.clientWidth]},s=[w(t[0],t[1],r.p1[1],r.p1[0],r.p2[1],r.p2[0]),w(t[0],t[1],o.p1[1],o.p1[0],o.p2[1],o.p2[0])],a=1/0;return s.forEach(((t,e)=>{t<a&&(a=t,i=["left","right"][e])})),[i,a]}([i,n],r)),c){let e;switch(c){case"top":case"bottom":this.speed=d/(u+1)*t,e=u<d;break;case"left":case"right":this.speed=l/(u+1)*t,e=u<l}e?this.isActive?this.isActive&&this.lastScrollingElement!==r&&(this.deactivateScroll(r),this.__activateScroll(r,c,o)):(this.isActive=!0,this.__activateScroll(r,c,o)):this.isActive&&(this.isActive=!1,this.deactivateScroll(r))}},this.__activateScroll=function(t,e,i){t.style.scrollBehavior="auto",this.lastScrollingElement=t,this.interval=setInterval((()=>{switch(e){case"top":t.scrollBy(0,-this.speed);break;case"bottom":t.scrollBy(0,this.speed);break;case"left":t.scrollBy(-this.speed,0);break;case"right":t.scrollBy(this.speed,0)}}),10)},this.deactivateScroll=function(t){t&&(t.style.scrollBehavior=""),clearInterval(this.interval)}}({speed:4,threshold:3}),myDropMarker:new function(t){t=Object.assign({borderSize:2,dropMarkerMargin:5},t);let e=document.createElement("div");e.id="dropMarker",e.style.pointerEvents="none",this.lastOrigntaion=void 0,document.body.append(e),this.obj=e,this.draw=function(i,n,r,o,s){e.style.display="block";let a,l=n.getBoundingClientRect();switch(l.width||l.height||(l=i.getBoundingClientRect(),r="top"),r){case"top":case"bottom":e.style.height=t.borderSize+"px",e.style.width=l.width+"px";break;case"left":case"right":e.style.width=t.borderSize+"px",e.style.height=l.height+"px";break;default:throw new Error("one type of orientation must be specified")}if(i!=n){let e=i.getBoundingClientRect()[r],n=l[r];Math.abs(e-n)<2*t.dropMarkerMargin&&(o=!0)}switch(a=s.frame?s.frame.getBoundingClientRect():{top:0,left:0},e.style.transition="top,left 0.2s ease-in-out",r){case"top":e.style.top=a.top+l.top-t.borderSize/2+window.scrollY+(o?t.dropMarkerMargin:-t.dropMarkerMargin)+"px",e.style.left=a.left+l.left-t.borderSize/2+window.scrollX+"px";break;case"bottom":e.style.top=a.top+l.bottom-t.borderSize/2+window.scrollY+(o?-t.dropMarkerMargin:t.dropMarkerMargin)+"px",e.style.left=a.left+l.left-t.borderSize/2+window.scrollX+"px";break;case"left":e.style.top=a.top+l.top-t.borderSize/2+window.scrollY+"px",e.style.left=a.left+l.left-t.borderSize/2+window.scrollX+(o?t.dropMarkerMargin:-t.dropMarkerMargin)+"px";break;case"right":e.style.top=a.top+l.top-t.borderSize/2+window.scrollY+"px",e.style.left=a.left+l.right-t.borderSize/2+window.scrollX+(o?-t.dropMarkerMargin:t.dropMarkerMargin)+"px";break;default:throw new Error("one type of orientation must be specified")}this.lastOrigntaion=r},this.hide=function(t){e.style.display="none"}}},{myDropMarker:W,scroller:z}=R,q=new function(t){this.dragedEl,this.dropedEl,this.position,this.id,this.type;let e=new v;this.on=function(){e.on.apply(e,arguments)},this.dragStart=(t,i,n,r,o)=>{this.id=n,this.dropType=o,this.dragedEl=i,e.dispatch("dragStart",{e:t,el:i,ref:r})},this.dragEnd=(i,n)=>{try{if(this.dragedEl&&this.dragedEl.removeAttribute("CoC-dragging"),this.position){if(this.dropedEl===this.dragedEl)throw"dnd cancelled. you can't dnd on the same element.";if(this.dragedEl.contains(this.dropedEl))throw"dnd cancelled, you can't dnd from parent to its children.";let e,i=C.default.getElementPath(this.dropedEl),n={position:this.position,dragedEl:this.dragedEl,dropedEl:this.dropedEl,dropType:this.dropType,path:i};t&&(e=t(n)),Object.assign(n,e);const r=new CustomEvent("dndsuccess",{bubbles:!1,detail:n});n.dropedEl,n.position,n.dragedEl;this.dropedEl.insertAdjacentElement(this.position,this.dragedEl),window.dispatchEvent(r,{bubbles:!1})}}catch(i){}finally{this.type&&(this.position=null),e.dispatch("dragEnd",{e:i,ref:n})}},this.dragOver=(t,i,n)=>{if(this.dragedEl&&this.dragedEl.setAttribute("CoC-dragging",!0),0===i.children.length){let[r,o]=y([t.x,t.y],[i]);e.dispatch("dragOver",{e:t,el:i,closestEl:o,orientation:r,hasChild:!0,ref:n}),this.position=S.includes(r)?"afterbegin":"beforeend",this.dropedEl=i,this.type="normal"}else{let[r,o]=y([t.x,t.y],i.children);if("true"==o.getAttribute("data-exclude")){this.dropedEl=o.parentElement;let[e,i]=y([t.x,t.y],[this.dropedEl]);r=e}else this.dropedEl=o;e.dispatch("dragOver",{e:t,el:i,closestEl:o,orientation:r,hasChild:!1,ref:n}),this.position=S.includes(r)?"beforebegin":"afterend",this.type="children"}}}((function(){return H?H.apply(null,arguments):{}}));q.on("dragStart",(t=>{W.hide(),T=new b(t.e,t.el,{window,document}),T.start()})),q.on("dragEnd",(t=>{W.hide(),T&&T.hide(t.ref)})),q.on("dragOver",(t=>{W.draw(t.el,t.closestEl,t.orientation,!!t.hasChild,t.ref)}));let N=!1;function F(t,e){let i=m(t.target,[a,l,d]);if(!Array.isArray(i))return;let[n,r]=i;switch(r){case l:let t=n.getAttribute("data-insert-html");if(t){if(n=function(t){let e=(new DOMParser).parseFromString(t,"text/html");return e.head.children[0]?e.head.children[0]:e.body.children[0]}(t),!n)return}else n=n.cloneNode(!0);break;case a:if(n.getAnyAttribute(d))return;break;default:n=f(n,a)}let o=g(n);I=o[1],e.document.body.style.cursor="crosshair !important",N=!0,q.dragStart(t,n,null,e,r)}function _(t,e){e.document.body.style.cursor="",N=!1,q.dragEnd(t),W.hide(),z.deactivateScroll()}function j({x:t,y:e,target:i,isTouch:n},r,s){if(!N)return;if(T&&T.draw({x:t,y:e},r),z.update(t,e),N){let[t,e]=g(i);if(I&&e){if(I!==e)for(;;){let n=g(t);if(!n[0])return;if(t=n[0].parentElement,e=n[1],I===e){i=n[0];break}}}else if(I!==e)return}else T&&T.hide();if(!i)return;let a=f(i,o);a&&(s||z.calculateScroll({x:t,y:e,element:a.parentElement?a.parentElement:a,onMouseScrollMove:t=>j(t,r,!0)}),q.dragOver({x:t,y:e,target:a},a,r))}O=(t,e)=>{1==t.which&&F(t,e)},B=(t,e)=>{1==t.which&&_(t,e)},L=(t,e)=>{j(t,e)};let P=new Map;const X=({isIframe:t,frame:e,document:i,window:n})=>{let r,o,s,d,c,u,h;if(t){let t=e.contentWindow,i=t.document||e.contentDocument,n=e.getBoundingClientRect();r={x:n.left,y:n.top,frame:e,window:t,document:i,isIframe:!0}}else r={x:0,y:0,window:n,document:i,isIframe:!1};if(k.register(r.window),!r.window.CoCreateDnd||!r.window.CoCreateDnd.hasInit){if(!r.document.querySelector("#dnd-style")){let t=r.document.createElement("style");t.id="dnd-style",t.innerHTML='    /* dnd specic */\n      [data-draggable="true"], [data-cloneable="true"]  {\n        touch-action: none;\n      }\n      /* dnd specic */',r.document.head.append(t)}r.document.addEventListener("dragstart",(t=>(t.preventDefault(),!1))),r.document.addEventListener("selectstart",(t=>{if(t.target.getAttribute&&t.target.hasAttribute("contenteditable")||t.target.parentElement.hasAttribute("contenteditable"))return;let e=m(t.target,[a,l]);Array.isArray(e)&&t.preventDefault()}),{passive:!1}),P.has(r.window)?({mousemovee:o,mouseupe:s,mousedowne:d,touchmovee:c,touchheade:u,touchstarte:h}=P.get(r.window)):(h=function(t){D&&clearTimeout(D),D=setTimeout((()=>{r.document.body.style.touchAction="none",t.preventDefault(),F(t,r)}),1e3)},u=function(t){r.document.body.style.touchAction="auto",N?(t.preventDefault(),_(t,r)):D&&clearTimeout(D)},c=function(t){if(!N)return void(D&&clearTimeout(D));t.preventDefault();let e=t.touches[0],i=e.clientX,n=e.clientY,o=r.document.elementFromPoint(i,n);o&&j({x:i,y:n,target:o,isTouch:!0},r)},d=function(t){O.apply(this,[t,r])},s=function(t){B.apply(this,[t,r])},o=function(t){L.apply(this,[t,r])},P.set(r.window,{mousemovee:o,mouseupe:s,mousedowne:d,touchmovee:c,touchheade:u,touchstarte:h})),r.document.removeEventListener("touchstart",h),r.document.addEventListener("touchstart",h),r.document.removeEventListener("touchend",u,{passive:!1}),r.document.addEventListener("touchend",u,{passive:!1}),r.document.removeEventListener("touchmove",c,{passive:!1}),r.document.addEventListener("touchmove",c,{passive:!1}),r.document.removeEventListener("mousedown",d),r.document.addEventListener("mousedown",d),r.document.removeEventListener("mouseup",s),r.document.addEventListener("mouseup",s),r.document.removeEventListener("mousemove",o),r.document.addEventListener("mousemove",o)}};window.addEventListener("load",(()=>{window.parent===window&&(X({document,window}),n.default.init({name:"dnd-config",observe:["childList"],include:".sortable, .cloneable",callback:t=>{let e=t.target?.parentElement||t.target;e&&r(e)}}),r(document))}));const Y=function({target:t,onDnd:e,onDndSuccess:i}){"function"==typeof i&&(H=i),u.push({target:t,onDnd:e})},U=function({target:t,dropable:e,draggable:i,cloneable:n,handle:r,group:d,exclude:u,beforeDndSuccess:h}){try{if("function"==typeof h&&(H=h),d&&t.setHiddenAttribute(c,d),u)try{t.querySelectorAll(u).forEach((t=>{t.setHiddenAttribute(s,"true")}))}catch(t){if(t instanceof HTMLElement){}throw t}e&&t.querySelectorAll(e).forEach((t=>{t.setHiddenAttribute(o,"true")})),i&&t.querySelectorAll(i).forEach((t=>{t.setHiddenAttribute(a,"true")})),n&&t.querySelectorAll(n).forEach((t=>{t.setHiddenAttribute(l,"true")}))}catch(t){if(t instanceof DOMException){throw t}throw t}};function G(t,e){t.children.length&&Array.from(t.children).forEach((t=>{G(t),t.setHiddenAttribute(s,"true"),t.setHiddenAttribute(a,"true"),e&&t.setHiddenAttribute(l,"true")}))}const J=function({target:t,cloneable:e=!1,nested:i=!1,handle:n,group:r,exclude:d}){if(r&&t.setHiddenAttribute(c,r),d)try{t.querySelectorAll(d).forEach((t=>{t.setHiddenAttribute(s,"true")}))}catch(t){if(t instanceof DOMException){throw"Dnd Sortable: exclude must be valid selector"}throw t}if(!t.tagName){throw"Dnd Sortable: Please provide a valid element"}if("boolean"!=typeof e){throw"Dnd Sortable: please provide valid data type for cloneable"}if("boolean"!=typeof i){throw"Dnd Sortable: please provide valid data type for nested"}i?G(t,e):(t.setHiddenAttribute(o,"true"),t.children.length&&Array.from(t.children).forEach((t=>{e?t.setHiddenAttribute(l,"true"):t.setHiddenAttribute(a,"true");try{let e=t.querySelectorAll(n);n&&e.length&&(t.setHiddenAttribute(a,"true"),e.forEach((t=>{t.setHiddenAttribute(a,"true")})))}catch(t){if(t instanceof DOMException){throw"Dnd Sortable: handle must be a valid selector"}throw t}})))};let K={initContainer:J,initElement:U,initFunction:Y};const Q={initIframe:X,init:function(t){let{mode:e}=t;if(delete t.mode,!["function","element","container"].includes(e))throw new Error("invalid mode provided");let i="init"+e.charAt(0).toUpperCase()+e.slice(1);K[i].apply(null,[t])}}},4247:()=>{window.addEventListener("load",(()=>{let t={host:{document,window},guests:{}};window.iframes=t;let e=document.getElementsByTagName("iframe"),i=1;for(let n of e){let e=n.id||"iframe"+i++;t.guests[e]={frame:n,document:n.contentDocument,window:n.contentWindow},n.contentWindow.iframes=t}new MutationObserver((function(e,n){for(let n of e)if("childList"===n.type)for(let e of n.addedNodes)if("IFRAME"===e.tagName){let n=e.id||"iframe"+i++;t.guests[n]={frame:e,document:e.contentDocument,window:e.contentWindow},e.contentWindow.iframes=t}})).observe(document.body,{attributes:!0,childList:!0,subtree:!0})}))},5959:()=>{let t=null,e=null;document.addEventListener("mousedown",(i=>{1===i.which&&(t=i.target,e=(new Date).getTime())})),document.addEventListener("mouseup",(i=>{let n=(new Date).getTime();if(t==i.target&&n<e+500){const t=new CustomEvent("CoCreateClickLeft",{bubbles:!0});i.target.dispatchEvent(t)}}))}}]);