(this.webpackChunkCoCreate=this.webpackChunkCoCreate||[]).push([[3247],{9247:(t,e,r)=>{"use strict";r.r(e),r.d(e,{default:()=>n});var a=r(3232),s=r(5611),i=r.n(s),o={selector:".progress-wrapper",mainObjects:[],init:function(){this.initElement(),this.initEvent()},initElement:function(t){let e=(t||document).querySelectorAll(this.selector),r=this;e.forEach((t=>{let e=a.default.setFilter(t,"data-progress_id","progress");if(!e)return;let s={el:t,filter:e,id:t.getAttribute("data-progress_id")};r.mainObjects.push(s),r.fetchProgess(t)}))},initEvent:function(){let t=this;i().listen("readDocumentList",(function(e){"progress-total"==e.metadata?t.renderProgress(e,!0):"progress-value"==e.metadata&&t.renderProgress(e,!1)}))},renderProgress(t,e){if(!t)return;const r=t.element;if(!r)return;const a=t.data.length;let s=this,i=[],o=e?".progressTotal":".progressValue";o+=`[data-progress_id="${r}"]`,i=document.querySelectorAll(o),i.forEach((t=>{t.textContent=a})),i=document.querySelectorAll(`.progressbar[data-progress_id="${r}"]`),i.forEach((t=>{"PROGRESS"===t.tagName?e?t.setAttribute("max",a):t.setAttribute("value",a):(e?t.setAttribute("data-total",a):t.setAttribute("data-value",a),s.renderBar(t))}))},renderBar:function(t){const e=Number(t.getAttribute("data-total")),r=Number(t.getAttribute("data-value"));if(!e||!r||0===e)return;const a=r/e*100;t.innerHTML=`<div style="width: ${a}%"></div>`},fetchProgess:function(t){let e=null,r=t.getAttribute("data-progress_id");if(this.mainObjects.forEach((t=>{t.id==r&&(e=t)})),!e)return;let s=e.filter,o=a.default.makeFetchOptions(s),n=a.default.makeFetchOptions(s),u=t.getAttribute("data-progress_name"),l=t.getAttribute("data-progress_value"),d=t.getAttribute("data-progress_operator")||"contain";o.metadata="progress-total",n.metadata="progress-value";let c=[].concat(n.operator.filters);c.push({name:u,value:[l],operator:d}),n.operator.filters=c,i().readDocumentList(o),i().readDocumentList(n)}};o.init();const n=o}}]);