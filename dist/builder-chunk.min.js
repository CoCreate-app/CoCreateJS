(this.webpackChunkCoCreate=this.webpackChunkCoCreate||[]).push([[653],{1930:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>A});a(7388);var d=a(8659),l=(a(366),a(2671)),n=a(685),i=a(371),o=a(4752),r=(a(9484),a(1384),a(439),a(3501)),c=a(3072),b=(a(166),a(4727));const s=[{selector:"*",editable:!1,draggable:!0,droppable:!0,selectable:!0,hoverable:!0},{selector:"h1, h2, h3, h4, h5, h6, p, span, blockquote",editable:!0,draggable:!0,droppable:!1,selectable:!0,hoverable:!0},{selector:"input",editable:!1,draggable:!1,droppable:!1},{selector:"textarea",editable:!1},{selector:"select",editable:!1},{selector:"div.quill",draggable:!0,droppable:!1,selectable:!0,hoverable:!1},{selector:"div.nav",tagName:"navbar",draggable:!0,droppable:!0,selectable:!0,hoverable:!0},{selector:"div.floating-label_field",draggable:!0,droppable:!1,selectable:!1,hoverable:!1},{selector:"div.ql-editor *",draggable:!1,droppable:!1},{tagName:"icon",selector:"a.menu_icon",editable:!1,draggable:!1,droppable:!1,selectable:!0,hoverable:!0},{selector:"a.menu_icon span",selectable:!1,hoverable:!1},{selector:"menu_icon.span",editable:!1,draggable:!1,droppable:!1,selectable:!1,hoverable:!1,selectable2:!0}].reverse();(async()=>{a.e(454).then(a.bind(a,7305)),a.e(520).then(a.bind(a,5925)),Promise.all([a.e(822),a.e(272),a.e(225),a.e(238)]).then(a.bind(a,4496)),a.e(478).then(a.bind(a,4454)),a.e(305).then(a.bind(a,2643)),Promise.resolve().then(a.bind(a,9484)),Promise.resolve().then(a.bind(a,1384)),Promise.resolve().then(a.bind(a,439))})(),window.elementConfig=s;let u,m,g,p,f,h=!1;function v(){try{u=document.querySelector("#canvas"),p={collection:u.getAttribute("data-collection"),document_id:u.getAttribute("data-document_id"),name:u.getAttribute("name")},o.default.init(p),g=u.contentWindow,m=g.document||u.contentDocument,m.ccdefaultView=g}catch(e){}}let y=!1;function _(){v(),y=!0}function N(){v();try{h||(h=!0,window.addEventListener("dndsuccess",(e=>{let{position:t,dragedEl:a,dropedEl:d,dropType:l,dragNextSib:n,dropNextSib:i}=e.detail;if(d.classList.contains("vdom-item")){let e=d.getAttribute("data-element_id");d=m.querySelector(`[data-element_id="${e}"]`),e=a.getAttribute("data-element_id"),a=m.querySelector(`[data-element_id="${e}"]`),n=c.default.getNextSibling(a),i=c.default.getNextSibling(d),d.insertAdjacentElement(t,a)}else if(!m.contains(d))return;switch(l){case"data-draggable":c.default.domToText({method:"insertAdjacentElement",property:t,target:{target:d.getAttribute("data-element_id"),tagName:d.tagName,nextSibling:i[0],skip:i[1]},element:{target:a.getAttribute("data-element_id"),tagName:a.tagName,nextSibling:n[0],skip:n[1]},...p});break;case"data-cloneable":c.default.domToText({method:"insertAdjacentElement",property:t,target:{target:d.getAttribute("data-element_id"),tagName:d.tagName,nextSibling:i[0],skip:i[1]},element:{value:a.outerHTML},...p})}}))),r.default.initIframe({isIframe:!0,frame:u}),r.default.init({mode:"function",target:m.body,onDnd:(e,t)=>{for(let a of(0,b.configMatch)(s,e))for(let d of t)return!0===a[d.substr(5)]?[e,d]:void 0},onDndSuccess:e=>{e.dragNextSib=c.default.getNextSibling(e.dragedEl),e.dropNextSib=c.default.getNextSibling(e.dropedEl),e.dragedEl.getAttribute("data-element_id")||e.dragedEl.setAttribute("data-element_id",(0,b.UUID)())}})}catch(e){}i.default.init({selector:"#selectedElementcoc",eventType:"click",config:s,configKey:"selectable",document:m}),i.default.init({selector:"#hoveredElementcoc",eventType:"mouseover",config:s,configKey:"hoverable",document:m});try{n.default.config({srcDocument:m,destDocument:document,selector:"*",target:"[data-attributes]:not(.styleunit)",callback:(e,t)=>{t.setAttribute("name",t.id+"-"+e.getAttribute("data-element_id")),t.setAttribute("data-attributes_target",`#${u.id};[data-element_id=${e.getAttribute("data-element_id")}]`)}})}catch(e){}try{let e=document.querySelector("[data-vdom_target]"),t=document.querySelector("[data-vdom_id]");t=t.contentDocument.body.parentNode,e.innerText="",t&&e&&(window.vdomObject=l.default.initVdom({realdom:t,virtualDom:e,ignore:"#dropMarker, script"}))}catch(e){}}"loading"===document.readyState?window.addEventListener("load",(e=>{y||_()})):y||_(),window.addEventListener("CoCreateHtmlTags-rendered",(async e=>{let{window:t}=e.detail;!function(e){_(),f?f.scanNewElement():f=d.default.init({document,exclude:"#ghostEffect, .vdom-item, #selectedElementcoc, #hoveredElementcoc",callback:({value:e,type:t,property:a,element:d,unit:l})=>{m.contains(d)&&c.default.domToText({method:"attribute"==t?"setAttribute":t,property:a,target:d.getAttribute("data-element_id"),tagName:d.tagName,value:e,unit:l,...p})}});N()}()}));const A={crdt:o.default}}}]);