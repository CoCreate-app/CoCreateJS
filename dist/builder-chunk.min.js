(this.webpackChunkCoCreate=this.webpackChunkCoCreate||[]).push([[8653],{1930:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>S});var l=a(7388),d=a(8659),n=(a(366),a(2671)),i=a(685),o=a(371),r=a(4752),c=(a(9484),a(1384),a(439),a(3501)),b=a(3072),s=(a(166),a(4727));const u=[{selector:"*",editable:!1,draggable:!0,droppable:!0,selectable:!0,hoverable:!0},{selector:"h1, h2, h3, h4, h5, h6, p, span, blockquote",editable:!0,draggable:!0,droppable:!1,selectable:!0,hoverable:!0},{selector:"input",editable:!1,draggable:!1,droppable:!1},{selector:"textarea",editable:!1},{selector:"select",editable:!1},{selector:"div.quill",draggable:!0,droppable:!1,selectable:!0,hoverable:!1},{selector:"div.nav",tagName:"navbar",draggable:!0,droppable:!0,selectable:!0,hoverable:!0},{selector:"div.floating-label_field",draggable:!0,droppable:!1,selectable:!1,hoverable:!1},{selector:"div.ql-editor *",draggable:!1,droppable:!1},{tagName:"icon",selector:"a.menu_icon",editable:!1,draggable:!1,droppable:!1,selectable:!0,hoverable:!0},{selector:"a.menu_icon span",selectable:!1,hoverable:!1},{selector:"menu_icon.span",editable:!1,draggable:!1,droppable:!1,selectable:!1,hoverable:!1,selectable2:!0}].reverse();(async()=>{a.e(2454).then(a.bind(a,7305)),a.e(5520).then(a.bind(a,5925)),Promise.all([a.e(7822),a.e(1272),a.e(225),a.e(3238)]).then(a.bind(a,4496)),a.e(4478).then(a.bind(a,4454)),a.e(1305).then(a.bind(a,2643)),Promise.resolve().then(a.bind(a,9484)),Promise.resolve().then(a.bind(a,1384)),Promise.resolve().then(a.bind(a,439))})(),window.elementConfig=u;let m,g,p,f,h,v=!1;function y(){try{m=document.querySelector("#canvas"),f={collection:m.getAttribute("data-collection"),document_id:m.getAttribute("data-document_id"),name:m.getAttribute("name")},r.default.init(f),p=m.contentWindow,g=p.document||m.contentDocument,g.ccdefaultView=p}catch(e){}}let _=!1;function N(){y(),_=!0}function A(){y();try{v||(v=!0,window.addEventListener("dndsuccess",(e=>{let{position:t,dragedEl:a,dropedEl:l,dropType:d,dragNextSib:n,dropNextSib:i}=e.detail;if(l.classList.contains("vdom-item")){let e=l.getAttribute("data-element_id");l=g.querySelector(`[data-element_id="${e}"]`),e=a.getAttribute("data-element_id"),a=g.querySelector(`[data-element_id="${e}"]`),n=b.default.getNextSibling(a),i=b.default.getNextSibling(l),l.insertAdjacentElement(t,a)}else if(!g.contains(l))return;switch(d){case"data-draggable":b.default.domToText({method:"insertAdjacentElement",property:t,target:{target:l.getAttribute("data-element_id"),tagName:l.tagName,nextSibling:i[0],skip:i[1]},element:{target:a.getAttribute("data-element_id"),tagName:a.tagName,nextSibling:n[0],skip:n[1]},...f});break;case"data-cloneable":b.default.domToText({method:"insertAdjacentElement",property:t,target:{target:l.getAttribute("data-element_id"),tagName:l.tagName,nextSibling:i[0],skip:i[1]},element:{value:a.outerHTML},...f})}}))),c.default.initIframe({isIframe:!0,frame:m}),c.default.init({mode:"function",target:g.body,onDnd:(e,t)=>{for(let a of(0,s.configMatch)(u,e))for(let l of t)return!0===a[l.substr(5)]?[e,l]:void 0},onDndSuccess:e=>{e.dragNextSib=b.default.getNextSibling(e.dragedEl),e.dropNextSib=b.default.getNextSibling(e.dropedEl),e.dragedEl.getAttribute("data-element_id")||e.dragedEl.setAttribute("data-element_id",(0,s.UUID)())}})}catch(e){}o.default.init({selector:"#selectedElementcoc",eventType:"click",config:u,configKey:"selectable",document:g}),o.default.init({selector:"#hoveredElementcoc",eventType:"mouseover",config:u,configKey:"hoverable",document:g});try{i.default.config({srcDocument:g,destDocument:document,selector:"*",target:"[data-attributes]:not(.styleunit)",callback:(e,t)=>{t.setAttribute("name",t.id+"-"+e.getAttribute("data-element_id")),t.setAttribute("data-attributes_target",`#${m.id};[data-element_id=${e.getAttribute("data-element_id")}]`)}})}catch(e){}try{let e=document.querySelector("[data-vdom_target]"),t=document.querySelector("[data-vdom_id]");t=t.contentDocument.body.parentNode,e.innerText="",t&&e&&(window.vdomObject=n.default.initVdom({realdom:t,virtualDom:e,ignore:"#dropMarker, script"}))}catch(e){}}"loading"===document.readyState?window.addEventListener("load",(e=>{_||N()})):_||N(),window.addEventListener("CoCreateHtmlTags-rendered",(async e=>{let{window:t}=e.detail;!function(e){N(),l.default.setOnStyleChange((function(e,t){r.default.replaceText({...f,name:"css",value:t.join("\r\n")})})),h?h.scanNewElement():h=d.default.init({document,exclude:"#ghostEffect, .vdom-item, #selectedElementcoc, #hoveredElementcoc",callback:({value:e,type:t,property:a,element:l,unit:d})=>{g.contains(l)&&b.default.domToText({method:"attribute"==t?"setAttribute":t,property:a,target:l.getAttribute("data-element_id"),tagName:l.tagName,value:e,unit:d,...f})}});A()}()}));const S={crdt:r.default}}}]);