(this.webpackChunkCoCreate=this.webpackChunkCoCreate||[]).push([[8073],{8619:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>d});var i=n(5611),r=n.n(i),a=n(9484),o=n(6515);n(2742);const c={masterDB:"5ae0cfac6fb8c4e656fdaf92",init:function(){config.organization_Id&&(this.masterDB=config.organization_Id);const t=this;r().socket.listen("runIndustry",(function(e){t.runIndustryProcess(e),document.dispatchEvent(new CustomEvent("runIndustry",{detail:e}))})),r().socket.listen("createIndustryNew",(function(t){document.dispatchEvent(new CustomEvent("createIndustry",{detail:t}))}))},runIndustry:function(t){const e=t.closest("form");if(!e)return;const n=e.querySelector("cocreate-select[name='industry']");if(n){const t=n.selectedOptions[0].getAttribute("value"),e=n.getAttribute("data-document_id");t&&e&&r().socket.send("runIndustry",{apiKey:config.apiKey,organization_id:config.organization_Id,industry_id:t,new_organization_id:e,db:this.masterDB})}},runIndustryProcess:function(t){const e=document.querySelector("[data-actions]");if(e){const n=e.form;if(!n)return;const i=n.querySelector("cocreate-select[name='industry']");if(i){const e=i.selectedOptions[0].getAttribute("value"),r=i.getAttribute("data-document_id");if(e==t.industry_id&&r){n.querySelector("input[name='apiKey']")}}}t.adminUI_id&&localStorage.setItem("adminUI_id",t.adminUI_id),t.builderUI_id&&localStorage.setItem("builderUI_id",t.builderUI_id)},createIndustryDocument:function(t){let e=t.closest("form");if(!e)return;let n=e.querySelectorAll("[data-collection='industries'][name]"),i={};n.forEach((t=>{let e=t.getAttribute("name"),n=a.default.getValue(t)||t.getAttribute("value");e&&n&&("array"==t.getAttribute("data-type")&&(n=[n]),i[e]=n)}));const o=config.organization_Id;i.organization_id=config.organization_Id,r().socket.send("createIndustryNew",{apiKey:config.apiKey,organization_id:config.organization_Id,db:this.masterDB,collection:"industries",data:i},o)}};c.init(),o.default.init({action:"runIndustry",endEvent:"runIndustry",callback:(t,e)=>{c.runIndustry(t)}}),o.default.init({action:"createIndustry",endEvent:"createdIndustry",callback:(t,e)=>{c.createIndustryDocument(t)}});const d=c}}]);