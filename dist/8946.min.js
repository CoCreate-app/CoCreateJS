(this.webpackChunkCoCreate=this.webpackChunkCoCreate||[]).push([[8946],{5730:function(e,t){var o;"undefined"!=typeof self&&self,void 0===(o=function(){return function(e){function t(){let t={};return e&&e.config&&(t=e.config),{apiKey:t.apiKey,organization_id:t.organization_Id}}function o(t){let o={};return e&&e.config&&(o=e.config),{apiKey:t.apiKey||o.apiKey,organization_id:t.organization_id||o.organization_Id}}function n(t,o){let n={};e&&e.config&&(n=e.config);let i=t||n.organization_Id,s=o||"";return s?`${i}/${s}`:i}function i(e=36){let t=(new Date).getTime(),o=0,n="uxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx";if(e<=n.length)n=n.substr(0,e);else{let t=e-n.length,o="-xxxyyxxx",i=Math.floor(t/o.length);for(let e=0;e<i;e++)n+=o;i=t-i*o.length,n+=o.substr(0,i)}return n.replace(/[xy]/g,(function(e){var n=16*Math.random();return t>0?(n=(t+n)%16|0,t=Math.floor(t/16)):(n=(o+n)%16|0,o=Math.floor(o/16)),("x"==e?n:7&n|8).toString(16)}))}return{getCommonParams:t,getCommonParamsExtend:o,generateSocketClient:n,GenerateUUID:i}}(window)}.apply(t,[]))||(e.exports=o)},5910:function(e,t,o){var n,i;"undefined"!=typeof self&&self,n=[o(5730)],void 0===(i=function(e){return function(e,t,o,n){class i{constructor(e="crud"){this.prefix=e||"crud",this.sockets=new Map,this.listeners=new Map,this.messageQueue=new Map,this.saveFileName="",this.globalScope=""}setGlobalScope(e){this.globalScope=`${this.prefix}/${e}`}getGlobalScope(){return this.globalScope}create(e){const{namespace:i,room:s}=e,a=this.getKey(i,s);let r,c=this;if(i&&this.setGlobalScope(i),this.sockets.get(a))return void(r=this.sockets.get(a));let l=t.location.protocol;"about:"===t.location.protocol&&(l=t.parent.location.protocol,e.host||(e.host=t.parent.location.host));let u="http:"===l?"ws":"wss";const d=e.port?e.port:8088;let f=`${u}://${t.location.host}:${d}/${a}`;e.host&&(f=e.host.includes("://")?`${e.host}/${a}`:e.host.includes(":")?`${u}://${e.host}/${a}`:`${u}://${e.host}:${d}/${a}`);try{r=new o(f)}catch(e){return}r.onopen=function(e){(c.messageQueue.get(a)||[]).forEach((e=>r.send(JSON.stringify(e)))),c.sockets.set(a,r),c.messageQueue.set(a,[])},r.onclose=function(t){switch(t.code){case 1e3:break;default:c.destroy(r,a),c.reconnect(r,e)}},r.onerror=function(t){c.destroy(r,a),c.reconnect(r,e)},r.onmessage=function(e){try{if(t.Blob&&e.data instanceof n)return void c.saveFile(e.data);let i=JSON.parse(e.data);if(i.data.event){if(t.CustomEvent){var o=new t.CustomEvent(i.data.event,{detail:i.data});return void t.document.dispatchEvent(o)}return void process.emit(i.data.event,i.data)}i.action;const s=c.listeners.get(i.action);if(!s)return;s.forEach((e=>{e(i.data,a)}))}catch(e){}}}send(t,o,n){const i={action:t,data:{...o,uid:e.GenerateUUID()}},s=this.getKeyByRoom(n),a=this.getByRoom(n);a?a.send(JSON.stringify(i)):this.messageQueue.get(s)?this.messageQueue.get(s).push(i):this.messageQueue.set(s,[i])}sendFile(e,t){const o=this.getByRoom(t);o&&o.send(e)}listen(e,t){this.listeners.get(e)?this.listeners.get(e).push(t):this.listeners.set(e,[t])}reconnect(e,t){let o=this;setTimeout((function(){o.create(t)}),1e3)}destroy(e,t){e&&(e.onerror=e.onopen=e.onclose=null,e.close(),e=null),this.sockets.get(t)&&this.sockets.delete(t)}destroyByKey(e){let t=this.sockets.get(e);t&&this.destroy(t,e)}getKey(e,t){let o=`${this.prefix}`;return e&&""!=e&&(o+=t&&""!=t?`/${e}/${t}`:`/${e}`),o}getByRoom(e){let t=this.getKeyByRoom(e);return this.sockets.get(t)}getKeyByRoom(e){let t=this.globalScope;return e&&(t=`${this.prefix}/${e}`),t}saveFile(e){if(t.document){const n=this.saveFileName||"downloadFile";var o=t.document.createElement("a");t.document.body.appendChild(o),o.style="display: none";let i=window.URL.createObjectURL(e);o.href=i,o.download=n,o.click(),t.URL.revokeObjectURL(i),this.saveFileName=""}}listenAsync(e){return new Promise(((o,n)=>{t.document?t.document.addEventListener(e,(function(e){o(e.detail)}),{once:!0}):process.once(e,(e=>{o(e)}))}))}}return i}(e,window,WebSocket,Blob)}.apply(t,n))||(e.exports=i)},6152:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>l});var n=o(5910),i=o.n(n),s=o(6515),a=o(1737);let r=new(i())("api");const c={modules:{},init:function({name:e,module:t}){this.register(e,t)},register:function(e,t){const o=this;void 0===this.modules[e]&&(this.modules[e]=t,r.listen(e,(t=>{o.__responseProcess(e,t)})),Array.isArray(t.actions)&&t.actions.forEach((e=>{"function"!=typeof t[`action_${e}`]&&(t[`action_${e}`]=function(n){o.__commonAction(t.id,e,n)}),s.default.init({action:e,endEvent:e,callback:o=>{t[`action_${e}`](o)}})})))},__responseProcess:function(e,t){const{type:o,response:n}=t,i=this.modules[e];o&&n&&i&&("function"==typeof i[`render_${o}`]&&i[`render_${o}`](n),this.render(o,n),document.dispatchEvent(new CustomEvent(o,{detail:{data:n}})))},__commonAction:function(e,t,o){const n=o.closest("form")||document;let i=c.getFormData(e,t,n);c.send(e,t,i)},getFormData:function(e,t,o){const n=`data-${e}`,i=this,s=o.querySelectorAll(`[${n}^="${t}."]`);let a={};s.forEach((o=>{let s=o.getAttribute(n),r=o.getAttribute(n+"_array"),c=i.__getElValue(o);if(s){if(t){let e=new RegExp(`^${t}.`,"i");if(!e.test(s))return;s=s.replace(e,"")}r?(a[s]||(a[s]=[]),a[s].push(i.getFormData(e,r,o))):null!=c&&(a[s]=c)}}));let r=Object.keys(a),c={};return r.forEach((e=>{if(e.split(".").length>1){let t=i.__createObject(a[e],e);delete a[e],c=i.__mergeObject(c,t)}else c[e]=a[e]})),c},__getElValue:function(e){let t=null;if(void 0!==e.value)switch(e.type.toLocaleLowerCase()){case"checkbox":e.checked&&(t=e.value);break;default:t=e.value}else t=e.getAttribute("value"),t||(t=e.innerHTML);return t},__mergeObject:function(e,t){e=e||{};for(let o of Object.keys(t))t[o]instanceof Object&&Object.assign(t[o],this.__mergeObject(e[o],t[o]));return Object.assign(e||{},t),e},__createObject:function(e,t){if(!t)return e;let o=t.split("."),n=e;for(var i=o.length-1;i>=0;i--)n={[o[i]]:n};return n},send:function(e,t,o){let n=this.getCommonParamsExtend(o||{});n={...n,data:o},r.send(e,{type:t,data:n})},render:function(e,t){a.default.data({selector:`[data-template_id="${e}"]`,data:t})},createApiSocket:function(e,t){t?(r.create({namespace:t,room:null,host:e}),r.setGlobalScope(t)):r.create({namespace:null,room:null,host:e})},getCommonParamsExtend:function(e){return{apiKey:e.apiKey||config.apiKey,securityKey:e.securityKey||config.securityKey,organization_id:e.organization_id||config.organization_Id}}};c.createApiSocket(window.config.host?window.config.host:"server.cocreate.app",window.config.organization_Id);const l=c},8946:function(e,t,o){var n,i;"undefined"!=typeof self&&self,n=[o(6152)],void 0===(i=function(e){return e}.apply(t,n))||(e.exports=i)}}]);